/*
PTGuiViewer version 2.8

See below for usage instructions!

PTGui Panorama Viewer, a combined Flash10 / CSS3 / WebGL viewer for spherical panoramas. 
(C) Copyright New House Internet Services BV 2010 - 2019
Website: http://www.ptgui.com/

License Agreement for PTGui Panorama Viewer

The software program PTGui Panorama Viewer ("PTGuiViewer") is licensed, not 
sold. By copying, publishing or distributing PTGuiViewer you agree to be bound 
by the terms of this agreement. If you do not agree to the terms of this 
agreement, you are not permitted to copy, publish or distribute PTGuiViewer.

1. Grant of a Limited License 

New House Internet Services B.V. ("NHIS") grants you ("Licensee") a non-exclusive, 
non-transferable Limited License ("License"). The License permits Licensee to 
include the files PTGuiViewer.js and PTGuiViewer.swf on any number of websites, 
provided that all of the following conditions are satisfied: 
- PTGuiViewer may only be used to display panoramic images created with
PTGui panoramic stitching software ("PTGui") by a licensee of PTGui,  
and 
- PTGuiViewer.js and PTGuiViewer.swf may only be published unmodified, as 
released by NHIS 

2. Ownership.

You acknowledge that NHIS and its licensors retain ownership of PTGuiViewer. 
NHIS reserves any rights not expressly granted to you. The rights granted are 
limited to NHIS's and its licensors' intellectual property rights in 
PTGuiViewer and do not include any other patents or intellectual property 
rights.

3. Transfer Restriction

You may not transfer or assign your rights under this License Agreement to 
another party without NHIS's prior written consent.

4. Support

You are welcome to post technical support questions to the PTGui Support 
forum. However, this license does not obligate NHIS to provide technical 
support.

5. Limitations

YOU MAY NOT REVERSE ENGINEER, DECOMPILE OR DISASSEMBLE PTGUIVIEWER, EXCEPT AND 
ONLY TO THE EXTENT EXPRESSLY PERMITTED BY APPLICABLE LAW. YOU MAY NOT MODIFY, 
ADAPT, TRANSLATE, RENT, LEASE, LOAN OR CREATE DERIVATIVE WORKS BASED UPON 
PTGUIVIEWER OR ANY PART THEREOF.

6. Restricted Uses

PTGUIVIEWER IS NOT INTENDED FOR USE IN THE OPERATION OF NUCLEAR FACILITIES, 
AIRCRAFT NAVIGATION OR COMMUNICATION SYSTEMS, AIR TRAFFIC CONTROL SYSTEMS, 
LIFE SUPPORT MACHINES OR OTHER EQUIPMENT IN WHICH THE FAILURE OF PTGUIVIEWER 
COULD LEAD TO DEATH, PERSONAL INJURY, OR SEVERE PHYSICAL OR ENVIRONMENTAL 
DAMAGE.

7. Limited Warranty

NHIS warrants for a period of thirty (30) days from the date of purchase of 
your License that PTGuiViewer as provided by NHIS will perform substantially 
in accordance with the accompanying documentation. NHIS's entire liability and 
your sole and exclusive remedy for any breach of the foregoing limited 
warranty will be, at NHIS's option, replacement of PTGuiViewer, refund of the 
purchase price or repair or replacement of PTGuiViewer which is returned to 
NHIS or an NHIS authorized representative with a copy of the receipt. THIS 
LIMITED WARRANTY IS THE ONLY WARRANTY PROVIDED BY NHIS AND NHIS AND ITS 
LICENSORS EXPRESSLY DISCLAIM ALL OTHER WARRANTIES, CONDITIONS OR OTHER TERMS, 
EITHER EXPRESS OR IMPLIED (WHETHER COLLATERALLY, BY STATUTE OR OTHERWISE), 
INCLUDING BUT NOT LIMITED TO IMPLIED WARRANTIES, CONDITIONS OR OTHER TERMS OF 
MERCHANTABILITY, SATISFACTORY QUALITY AND/OR FITNESS FOR A PARTICULAR PURPOSE 
WITH REGARD TO PTGUIVIEWER AND ACCOMPANYING WRITTEN MATERIALS. FURTHERMORE, 
THERE IS NO WARRANTY AGAINST INTERFERENCE WITH YOUR ENJOYMENT OF PTGUIVIEWER 
OR AGAINST INFRINGEMENT OF THIRD PARTY PROPRIETARY RIGHTS BY PTGUIVIEWER. NHIS 
DOES NOT WARRANT THAT THE OPERATION OF PTGUIVIEWER WILL BE UNINTERRUPTED OR 
ERROR-FREE, OR THAT DEFECTS IN PTGUIVIEWER WILL BE CORRECTED. NO ORAL OR 
WRITTEN INFORMATION OR ADVICE GIVEN BY NHIS OR AN NHIS AUTHORIZED 
REPRESENTATIVE SHALL CREATE A WARRANTY. BECAUSE SOME JURISDICTIONS DO NOT 
ALLOW THE EXCLUSION OR LIMITATION OF IMPLIED WARRANTIES, CONDITIONS OR OTHER 
TERMS THE ABOVE LIMITATION MAY NOT APPLY TO YOU. THE TERMS OF THIS DISCLAIMER 
AND THE LIMITED WARRANTY UNDER THIS SECTION DO NOT AFFECT OR PREJUDICE THE 
STATUTORY RIGHTS OF A CONSUMER ACQUIRING PTGUIVIEWER OTHERWISE THAN IN THE 
COURSE OF A BUSINESS, NEITHER DO THEY LIMIT OR EXCLUDE ANY LIABILITY FOR DEATH 
OR PERSONAL INJURY CAUSED BY NHIS'S NEGLIGENCE.

8. Exclusion and Limitation of Remedies and Damages.

IN NO EVENT WILL NHIS, ITS PARENTS, SUBSIDIARIES, OR ANY OF THEIR LICENSORS, 
DIRECTORS, OFFICERS, EMPLOYEES OR AFFILIATES OF ANY OF THE FOREGOING BE LIABLE 
TO ANY OTHER PARTY FOR ANY CONSEQUENTIAL, INCIDENTAL, INDIRECT OR SPECIAL 
DAMAGES WHATSOEVER (INCLUDING WITHOUT LIMITATION, DAMAGES FOR LOSS OF BUSINESS 
PROFITS, BUSINESS INTERRUPTION, LOSS OF DATA, LOSS OF BUSINESS INFORMATION AND 
THE LIKE) OR DIRECT LOSS OF BUSINESS, BUSINESS PROFITS OR REVENUE, WHETHER 
FORESEEABLE OR UNFORESEEABLE, ARISING OUT OF THE USE OF OR INABILITY TO USE 
PTGUIVIEWER OR ACCOMPANYING WRITTEN MATERIALS, REGARDLESS OF THE BASIS OF THE 
CLAIM (WHETHER UNDER CONTRACT, NEGLIGENCE OR OTHER TORT OR UNDER STATUTE OR 
OTHERWISE HOWSOEVER ARISING) AND EVEN IF ADVISED OF THE POSSIBILITY OF SUCH 
DAMAGE.

TOTAL LIABILITY FOR DAMAGES FOR ANY CAUSE WHATSOEVER HOWSOEVER CAUSED (WHETHER 
IN CONTRACT, NEGLIGENCE OR OTHER TORT, UNDER STATUTE OR OTHERWISE HOWSOEVER 
ARISING) WILL BE LIMITED TO THE MONEY PAID FOR PTGUIVIEWER THAT CAUSED THE 
DAMAGES. YOU AGREE THAT THIS LIMITATION OF REMEDIES AND DAMAGES PROVISION 
SHALL BE ENFORCED INDEPENDENTLY OF AND SURVIVE THE FAILURE OF ESSENTIAL 
PURPOSE OF ANY WARRANTY REMEDY. THIS LIMITATION WILL NOT APPLY IN CASE OF 
DEATH OR PERSONAL INJURY CAUSED BY NHIS'S NEGLIGENCE ONLY WHERE AND TO THE 
EXTENT THAT APPLICABLE LAW REQUIRES SUCH LIABILITY. BECAUSE SOME JURISDICTIONS 
DO NOT ALLOW THE EXCLUSION OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR 
INCIDENTAL DAMAGES, THE LIMITATION OF LIABILITY IN THIS SECTION MAY NOT APPLY 
TO YOU. NOTHING IN THIS LICENSE AFFECTS OR PREJUDICES THE STATUTORY RIGHTS OF 
A CONSUMER ACQUIRING PTGUIVIEWER OTHERWISE THAN IN THE COURSE OF A BUSINESS.

9. General Terms

This License shall be governed by the laws of The Netherlands. Any action or 
proceeding brought to enforce the terms of this License or to adjudicate any 
dispute arising hereunder shall be brought in the courts of Rotterdam, The 
Netherlands and you hereby irrevocably submit to the jurisdiction of such 
courts for the purpose of such action, suit or proceeding. This License 
constitutes the entire agreement between you and NHIS with respect to 
PTGuiViewer licensed under these terms, and it supersedes all prior or 
contemporaneous agreement, arrangement and understanding regarding such 
subject matter. You acknowledge and agree that you have not relied on any 
representations made by NHIS, however, nothing in this License shall limit or 
exclude liability for any representation made fraudulently. No amendment to or 
modification of this License will be binding unless in writing and signed by 
NHIS. If any provision of this License shall be held by a court of competent 
jurisdiction to be contrary to law, that provision will be enforced to the 
maximum extent permissible, and the remaining provisions of this License will 
remain in full force and effect. No failure or delay by NHIS in exercising its 
rights or remedies shall operate as a waiver unless made by specific written 
notice. No single or partial exercise of any right or remedy of NHIS shall 
operate as a waiver or preclude any other or further exercise of that or any 
other right or remedy.

------------------------ USAGE: ------------------------

Quick start: include the following code in the <head> of your HTML file:


<script type="text/javascript" src="PTGuiViewer.js"></script>
<script type="text/javascript">
var viewer=new PTGuiViewer();
viewer.setSwfUrl("PTGuiViewer.swf");
viewer.preferHtmlViewer();
// or viewer.preferFlashViewer()
viewer.setVars({
  pano: "myimage",
  format: "14faces",
});
viewer.embed("mypanoviewer");
</script>

And in the <body> include:
<div id="mypanoviewer"></div>


The viewer will be embedded as child of the above <div>, and it will use the
images myimage00.jpg ... myimage14.jpg. 

Details:
viewer.setSwfUrl(url)
Point to the location of the accompanying file PTGuiViewer.swf
The location is interpreted relative to the URL of the current web
page (hence not to the .js location).

The PTGui Viewer supports 3 technologies: Flash10, CSS3D and WebGL. 
The Flash10 viewer is available on all browsers with the Flash version 10 plugin
installed. 
CSS3D works (as of feb 2011) on Apple's Safari 5 and IOS (iPhone/iPad/iPod).
WebGL is supported (as of feb 2011) on Chrome 9 and Firefox 4.  

viewer.preferHtmlViewer()
viewer.preferFlashViewer()
These functions determine which technology will be used if the browser supports 
both the native (CSS3D or WebGL) viewer and Flash10. 

viewer.setVars()
Pass an array with the following key/value pairs:
- pano (required): the relative url of the panoramic tiles. The viewer appends
the suffixes 00.jpg through 14.jpg.
- format (required): format of the panoramic tiles. Currently only the '14faces'
format is supported (as produced by PTGui). Future versions of the viewer may
support other formats, therefore this option is required for future 
compatibility.
- pan, tilt, fov: initial viewing parameters. Pan rotates in horizontal direction,
tilt is up/down. Fov is the diagonal field of view angle.
- maxpan, maxtilt, maxfov, minpan, mintilt, minfov: Maximum and minimum limits
for pan/tilt/fov.
- autorotatespeed: speed (in degrees per second) for automatic rotation. If set
to 0, autorotate is disabled. Autorotation starts immediately upon loading the
panorama and ends when the user clicks in the panorama.
- autorotatedelay: If nonzero, autorotation is resumed .. seconds after the user
has released the mouse
- autorotatetohorizon: true or false (default is true)
If true, when autorotation is started the viewer navigates to the horizon. If 
false, the viewer will stay at the current tilt angle when autorotation starts.
- maxiosdimension: Limit the tile size on Apple iOS devices.
If a too large panorama is shown on an iPad/iPhone/iPod, the Safari browser will
crash because it runs out of memory. This setting limits reduces the tile size
on these devices. The recommended (and default) value is 400. 
- showfullscreenbutton_flash: true or false
Sets whether the fullscreen button is visible in the Flash viewer
- showfullscreenbutton_html: true or false
Sets whether the fullscreen button is visible in the HTML viewer
(HTML viewer does not support true full screen viewing due to restrictions in the
HTML standard. Clicking the fullscreen button enlarges the viewer to the full
browser window size.)
- enablegyroscope: true or false
On devices with a gyroscope (iPhone 4 or iPad 2) the viewer can look around in
the panorama by rotating the device. Enabled or disabled by this setting.
- enablemactouchpad: true or false (default is true)
On a mac, enable navigating the panorama by swiping with two fingers on the 
touchpad, or swiping with one finger on the magic mouse. Zooming on a touchpad
is done by clicking with two fingers on the touchpad, holding down and dragging.
With the magic mouse zooming is done by clicking on the right half of the mouse
button, holding down and dragging.
If this is set to false, swiping with two fingers on the touchpad, or swiping with
one finger on the magic mouse, performs zooming.
- mousemode: 'drag' or 'moveto'
Controls the navigation mode on non-mobile devices. If 'drag' is selected, the
panorama is navigated by click&dragging (swiping). 'moveto' will contiuously move
the panorama while holding down the mouse. On mobile devices the panorama is always 
navigated by dragging/swiping, regardless of this setting.

viewer.setFlashObjectParams()
Allows adding custom parameters for the Flash object/embed tag. For example:
viewer.setFlashObjectParams({
  wmode: "opaque"
});
will add a <param name="wmode" value="opaque"> to the Flash <object> tag
and a parameter in the Flash <embed> tag: <embed ... wmode="opaque" ...>
Only used for the Flash viewer, ignored when using CSS3D or WebGL. 

viewer.embed(container)
Embeds the viewer as a child of the given container. All contents of the 
container element is cleared, and the viewer will make itself a child element
of the container.
The container can be either an html element object (as returned by 
document.getElementById) or a string representing the id of the container
element.
If embed() is called before the page has finished loading, the embedding
will be done as soon as the page has finished loading. So it is safe to call
embed() in a script in the <head> of the HTML page, passing the id of a container 
element that has not yet been created.

viewer.showInLightbox()
Pops up a 'lightbox' (a black window overlaying the entire browser window)
showing the panorama. The user can close the panorama and return to the page by 
pressing the red close button at the top left corner. This method is to be used 
instead of embed(), in response to a user action, for example:
<a href="#" onclick="viewer.showInLightbox(); return false;">view panorama</a>
In Internet Explorer the lightbox is shown correctly only when the page is 
rendered in HTML Strict mode. For compatibility with IE the following line 
should therefore be inserted at the top of the HTML page:
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
 

-----------------------------------------------------------

*/

// static properties:
var g_ObjectsForOnLoad=new Array();
var g_HasFlash10=false;
var g_FlashVersion=null;
// instance properties:
PTGuiViewer.prototype.m_ViewerVars;
PTGuiViewer.prototype.m_FlashObjectParams;
PTGuiViewer.prototype.m_SwfUrl;
PTGuiViewer.prototype.m_ContainerForEmbedOnLoad=null;
PTGuiViewer.prototype.m_bodyLoaded=false;
PTGuiViewer.prototype.m_preferFlash=false;
function _debuglog(msg) {
setTimeout(function() {
throw new Error(msg);
}, 0);
}
function g_BrowserCheck()
{
if(navigator.plugins)
{
var flashobj=navigator.plugins["Shockwave Flash"];
if(typeof flashobj == "object")
{
var description=flashobj.description;
if(description)
{
var enabled=true;
if(navigator.mimeTypes)
{
if(navigator.mimeTypes["application/x-shockwave-flash"])
{
if(!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)
{
enabled=false;
}
}
}
if(enabled)
{
description = description.replace(/^.*\s+(\S+\s+\S+$)/, "$1");
g_FlashVersion=new Array();
g_FlashVersion[0] = parseInt(description.replace(/^(.*)\..*$/, "$1"), 10);
g_FlashVersion[1] = parseInt(description.replace(/^.*\.(.*)\s.*$/, "$1"), 10);
g_FlashVersion[2] = /[a-zA-Z]/.test(description) ? parseInt(description.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0;
}
}
}
}
if(!g_FlashVersion)
{
if(window.ActiveXObject)
{
try 
{
var a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
if (a)
{
var description = a.GetVariable("$version");
if(description)
{
description = description.split(" ")[1].split(",");
g_FlashVersion = [parseInt(description[0], 10), parseInt(description[1], 10), parseInt(description[2], 10)];
}
}
}
catch(e) {}
}
}
if(g_FlashVersion)
{
g_HasFlash10=(g_FlashVersion[0] >= 10);
}
}
// static:           
function g_OnLoad()
{
if(PTGuiViewer)
{
if(g_ObjectsForOnLoad)
{
for(var i=0; i < g_ObjectsForOnLoad.length; i++)
{
g_ObjectsForOnLoad[i].bodyOnLoad();
}
g_ObjectsForOnLoad=null;
}
}
}
// register obj.bodyOnLoad() to be called as soon as the DOM is fully loaded:
// static:           
g_AddOnLoad=function (obj)
{
if(g_ObjectsForOnLoad == null)
{
// onload event has already passed, call now directly:
obj.bodyOnLoad();
}
else
{
g_ObjectsForOnLoad[g_ObjectsForOnLoad.length]=obj;
}
}
// initialization:
g_BrowserCheck();
if(window.addEventListener)
{
window.addEventListener("load", g_OnLoad, false);
}
else if(window.attachEvent)
{
window.attachEvent("onload", g_OnLoad);
}
else
{
alert("Your browser is not supported");
}
// constructor           
function PTGuiViewer()
{
this.m_ViewerVars=new Array();
this.m_FlashObjectParams=new Array();
//this.m_FlashObjectParams["wmode"]="transparent";
this.m_FlashObjectParams["wmode"]="direct"; // for mouse wheel under firefox
this.m_SwfUrl=null;
this.m_ContainerForEmbedOnLoad=null;
g_AddOnLoad(this); // so that this.bodyOnLoad() gets called once the DOM is ready 
}

PTGuiViewer.prototype.bodyOnLoad = function()
{
this.m_bodyLoaded=true;
if(this.m_ContainerForEmbedOnLoad)
{
this.embedNow(this.m_ContainerForEmbedOnLoad);
this.m_ContainerForEmbedOnLoad=null;
}
}
PTGuiViewer.prototype.preferFlashViewer = function()
{
this.m_preferFlash=true;
}
PTGuiViewer.prototype.preferHtmlViewer = function()
{
this.m_preferFlash=false;
}
PTGuiViewer.prototype.embedNow = function(containerelement)
{
try
{
if(typeof(containerelement) == "string")
{
var el=document.getElementById(containerelement);
if(!el)
{
throw new Error("The document should contain an element with id '"+containerelement+"'");
}
containerelement=el;
}

// empty the container:
while(containerelement.hasChildNodes())
{
var child=containerelement.childNodes[0];
containerelement.removeChild(child);
}
var supportsHtmlViewer=nhPanoramaViewer.isSupported();
if( (!supportsHtmlViewer) && ((!g_HasFlash10) || (!this.m_SwfUrl)) )
{
var errtxt;
if(this.m_SwfUrl)
{
errtxt="To view this panorama you need the <a href=\"http://www.adobe.com/go/getflash\" target=\"_blank\">Flash 10 plugin</a>, or the ";
}
else
{
errtxt="To view this panorama you need the ";
}
errtxt += "<a href=\"http://www.apple.com/safari/download/\" target=\"_blank\">Safari 5</a> or <a href=\"http://www.google.com/chrome/\" target=\"_blank\">Chrome 9</a> web browser.";
containerelement.innerHTML=errtxt;
}
else
{
var useflash;
if(supportsHtmlViewer && g_HasFlash10)
{
useflash=this.m_preferFlash;
}
else
{
useflash=g_HasFlash10;
}
if(useflash)
{
this.createFlashViewer(containerelement,this.m_SwfUrl, this.m_ViewerVars, this.m_FlashObjectParams);
}
else
{
this.createHtml5Viewer(containerelement, this.m_ViewerVars);
}
}                
}
catch(e)
{
alert("Error: "+e.message);
}
}
PTGuiViewer.prototype.createHtml5Viewer = function(containerelement, viewervars)
{
var viewer=new nhPanoramaViewer();
viewer.setParams(viewervars);
viewer.createControl(containerelement);
}
PTGuiViewer.prototype.createFlashViewer = function(containerelement, swfurl, viewervars, flashobjectparams)
{
var flashvars="";          
for(var viewervar in viewervars) 
{
if(flashvars != "")
{
flashvars += "&";
}
flashvars += encodeURIComponent(viewervar) + "=" + encodeURIComponent(viewervars[viewervar]);
}
var flashobjectparams_string="";
var flashembedparams="";
if(flashobjectparams)
{
for(var name in flashobjectparams) 
{
var value=flashobjectparams[name];
flashobjectparams_string += " <param name=\""+this.encodeHtml(name)+"\" value=\""+this.encodeHtml(value)+"\" />";
flashembedparams += " "+name+"=\""+this.encodeHtml(value)+"\"";
}
} 
var flashtag="<object width=\"100%\" height=\"100%\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\">"
+"<param name=\"movie\" value=\""+this.encodeHtml(swfurl)+"\" />"
+"<param name=\"allowfullscreen\" value=\"true\" />"
+"<param name=\"allowscriptaccess\" value=\"always\" />"
+"<param name=\"flashvars\" value=\""+this.encodeHtml(flashvars)+"\" />"
+flashobjectparams_string
+"<embed src=\""+this.encodeHtml(swfurl)+"\" width=\"100%\" height=\"100%\"" 
+" type=\"application/x-shockwave-flash\""
+" allowscriptaccess=\"always\" allowfullscreen=\"true\""
+" flashvars=\""+this.encodeHtml(flashvars)+"\""
+flashembedparams
+" />"
+"</object>";
containerelement.innerHTML=flashtag;
}
PTGuiViewer.prototype.setFlashObjectParams = function(params)
{
this.m_FlashObjectParams=params;
}
PTGuiViewer.prototype.encodeHtml = function(str)
{
var result=str;
result=result.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\"/g, "&quot;");
return result;
}
PTGuiViewer.prototype.setSwfUrl = function(url)
{
this.m_SwfUrl=url;
} 
PTGuiViewer.prototype.setVars = function(vars)
{
this.m_ViewerVars=vars;
}
PTGuiViewer.prototype.embed = function(id) 
{
try
{
if(this.m_bodyLoaded)
{
this.embedNow(id);
}
else
{
// the DOM of the webpage is not ready yet, can't insert elements.
// embedNow() will be called later from bodyOnLoad
this.m_ContainerForEmbedOnLoad=id;
}
}
catch(e)
{
alert("Error: "+e.message);
}
}
PTGuiViewer.isMac=function()
{
return !!(window.navigator.platform.match(/^mac/i));
}
PTGuiViewer.prototype.showInLightbox = function() 
{
var _this=this;
if(!this.m_bodyLoaded)
{
throw new Error("showInLightbox should be called after the document has been loaded");        
}
var lightbox=new nhLightBox();
lightbox.openWithCallback(function(containerdiv){
var contentdiv=document.createElement("div");
contentdiv.style.width="100%";
contentdiv.style.height="100%";
containerdiv.appendChild(contentdiv);
_this.embedNow(contentdiv);
});
}
///////
function nhLightBox()
{
}
nhLightBox.prototype.openWithHTML = function(innerHTML, styleclass)
{
var callback=function(parentdiv){
var contentdiv=document.createElement("div");
contentdiv.style.width="100%";
contentdiv.style.height="100%";
contentdiv.innerHTML=innerHTML;
contentdiv.id="contentdiv";
parentdiv.appendChild(contentdiv);
};
this.openWithCallback(callback, styleclass);
}
nhLightBox.prototype.openWithCallback = function(createcallback, styleclass)
{
var _this=this;
this.m_CreateCallback=createcallback;
//  var body = document.getElementsByTagName("body")[0]; 
var div=document.createElement("div");
div.style.position="fixed";
div.style.zIndex="10000";
div.style.width="0%";
div.style.height="0%";
if(styleclass)
{
div.className=styleclass;
}
else
{
div.style.backgroundColor="rgb(0,0,0)";
}
var dpi=this.getDpi();
var btnwidth=dpi*0.3;
var closebtn=document.createElement("canvas");
closebtn.width=btnwidth;
closebtn.height=btnwidth;
closebtn.style.position="absolute";
closebtn.style.left="5px";
closebtn.style.top="5px";
closebtn.style.cursor="pointer";
closebtn.style.zIndex="10000";
this.drawCloseButtonToCanvas(closebtn);

if(window.addEventListener)
{
closebtn.addEventListener("click",function(){
_this.close();
},false);
}
else if(window.attachEvent)
{
closebtn.attachEvent("onclick",function(){
_this.close();
});
}
div.appendChild(closebtn);
var ua=window.navigator.userAgent;  
if(ua.match(/ applewebkit\/.*/i))
{
if(ua.match(/ mobile\/.*/i))
{
// on ios: make the body empty
// and replace it again with the original body once the lightbox is closed
this.m_BodyBeforeFullScreen=document.body;
document.body=document.createElement("body");
}
}
document.body.appendChild(div);
this.m_Div=div;
var now=new Date().getTime();
window.setTimeout(function(){
_this.animate(now,false);
},0);
}
nhLightBox.prototype.getDpi = function()
{
var result=96.0;
var ua=window.navigator.userAgent;  
if(ua.match(/ applewebkit\/.*/i))
{
if(ua.match(/ mobile\/.*/i))
{
var longside,shortside;  // inch
if(ua.match(/ipad\;/i))
{
longside=7.77;
shortside=5.82;
}
else
{
longside=2.97;
shortside=1.98;
}
if(window.innerWidth > window.innerHeight)
{
// landscape:
result=window.innerWidth / longside;
}
else
{
// portrait:
result=window.innerWidth / shortside;
}
}
}
return result;
}
nhLightBox.prototype.animate = function(starttime,isclosing)
{
var _this=this;
var div=this.m_Div;
var now=new Date().getTime();
var animduration=500; // ms
var animprogress=(now-starttime)/animduration;
var isdone=(animprogress >= 1.0);
if(isclosing) animprogress=1.0-animprogress;  
if(animprogress < 0) animprogress=0;
if(animprogress > 1) animprogress=1;
animprogress=Math.sin(0.5*animprogress*Math.PI);
var size=animprogress*100+"%";
var offset=(1.0-animprogress)*50+"%";
var opacity=animprogress*1.0;
div.style.width=size;
div.style.height=size;
div.style.left=offset;
div.style.top=offset;
div.style.opacity=opacity;
div.style.filter="alpha(opacity="+(opacity*100)+")"; /* For IE8 and earlier */
if(!isdone)
{
window.setTimeout(function(){
_this.animate(starttime,isclosing);
},30);
}
else
{
if(isclosing)
{
div.parentNode.removeChild(div);
if(this.m_BodyBeforeFullScreen)
{
document.body=this.m_BodyBeforeFullScreen;
this.m_BodyBeforeFullScreen=null;
}
}
else
{
this.m_CreateCallback(div);
}
}
}
nhLightBox.prototype.close = function()
{
var _this=this;
var div=this.m_Div;
while(div.firstChild) 
{
div.removeChild(div.firstChild);
}
var now=new Date().getTime();
window.setTimeout(function(){
_this.animate(now,true);
},0);
}
nhLightBox.prototype.drawCloseButtonToCanvas = function(canvas)
{
if(canvas.getContext)
{ 
var c=canvas.getContext('2d');
if(c)
{
var w=canvas.width;
var center=w/2.0;
c.lineWidth=w/16.0;
var r=0.4375*w;
var d1=0.21875*w;
var d2=0.125*w;
var d3=0.09375*w;
var gradient=c.createLinearGradient(0,0,w,w);
gradient.addColorStop(0.2,"rgb(255,158,158)");
gradient.addColorStop(0.8,"rgb(188,0,0)");      

c.fillStyle=gradient;
c.lineJoin="round";
c.strokeStyle="rgb(128,0,0)";
c.beginPath();
c.arc(center,center,r,0,360);
c.closePath();
c.fill();
c.stroke();
c.fillStyle="rgb(255,255,255)";
c.strokeStyle="rgb(128,0,0)";
c.beginPath();
c.moveTo(center-d1, center-d1);
c.lineTo(center-d2, center-d1);
c.lineTo(center-0, center-d3);
c.lineTo(center+d2, center-d1);
c.lineTo(center+d1, center-d1);
c.lineTo(center+d1, center-d2);
c.lineTo(center+d3, center-0);
c.lineTo(center+d1, center+d2);
c.lineTo(center+d1, center+d1);
c.lineTo(center+d2, center+d1);
c.lineTo(center+0, center+d3);
c.lineTo(center-d2, center+d1);
c.lineTo(center-d1, center+d1);
c.lineTo(center-d1, center+d2);
c.lineTo(center-d3, center+0);
c.lineTo(center-d1, center-d2);
c.lineTo(center-d1, center-d1);
c.closePath();
c.fill();
c.stroke();
}
}
};
var p1=nhPanoramaViewer.prototype;
p1.xMc=0;
p1.xYh=1;
p1.xzb=2;
p1.xcb=3;
p1.xce=4;
p1.xkh=0;
p1.xdb=0;
p1.xGc=1;
p1.xyb=1;
p1.xWf=0;
p1.xgc=0;
p1.xzf=false;
p1.xBb=0;
p1.xbb=1;
p1.xdf=2;
p1.xYg=0;
p1.xFb=0;
p1.xQh=null;
p1.xWg=0;
p1.xue=true;
p1.xQ=true;
p1.xNc=-1;
p1.xWh="60337240389312038807378101703253291188085801607122459149815687344456454028658850724139006418813300568302855416701775277687";
p1.xcd="17";
p1.xfe="";
p1.xTd="";
p1.xD="";
p1.xnc=false;
p1.xU="2.8";
p1.x1h=0;
p1.xSh=0;
p1.xcc=90;
p1.xMh=false;
p1.x9e=false;
p1.xnh=true;
p1.xmb=new Array();
p1.xs=new Array();
p1.xzd=new Array();
p1.xRb=0.1;
p1.xOc=null;
p1.xlg=null;
p1.xde=0.5;
p1.xXd=0;
p1.xSb=new Array();
p1.xQd="";
p1.x2d=false;
p1.xhb=new Array();
p1.xFe=false;
p1.xsb=false;
p1.xQg=false;
p1.xRg=-1;
p1.xrh=0;
p1.xTg=0;
p1.xye=1000;
p1.x3f=1000;
p1.xlf=false;
p1.xyd=2;
p1.xgg=0;
p1.x3b=0;
p1.xYc=0;
p1.x0g=0;
p1.xae=0;
p1.xtd=0;
p1.xgb=500;
p1.xWc=0;
p1.xpg=0;
p1.xZb=0;
p1.xqf=0;
p1.xJb=0;
p1.x6e=false;
p1.x3h=0.2;
p1.xmh=140.0;
p1.xRc=2000.0;
p1.x2g=200.0;
p1.xxe=500.0;
p1.xTc=2.0;
p1.xVb=0.05 / 40;
p1.xef=0;
p1.xp=0;
p1.xeg=1;
p1.xId=10.0;
p1.xnb=15;
p1.xrg=7.0;
p1.xCb=90.0;
p1.xhg=140.0;
p1.xph=20.0;
p1.x9=0.0;
p1.xbc=180.0;
p1.x4f=-180.0;
p1.x0e=0.0;
p1.xfh=90.0;
p1.xcg=-90.0;
p1.xig=800;
p1.xKg=false;
function nhPanoramaViewer()
{
this.xzf=(nhPanoramaViewer.isIOS() || nhPanoramaViewer.isAndroid());
}
p1.setParams=function(xX)
{
this.xhb=xX;
}
p1.createControl=function(xj)
{
if(!nhPanoramaViewer.isSupported())
{
var xoh="Your browser does not support this viewer";
alert(xoh);
throw new Error(xoh);
}
var isLocalFile=!!(window.location.href.match(/^file\:\/\/.*/));
if( (nhPanoramaViewer.isChrome() || nhPanoramaViewer.isFirefox()) && nhPanoramaViewer.hasWebGL())
{
this.xsb=true;
}
else
{
if(nhPanoramaViewer.hasWebGL())
{
this.xsb=true;
}
else
{
this.xQg=true;
}
}
this.x4e=xj;
while(xj.hasChildNodes())
{
var x9d=xj.childNodes[0];
xj.removeChild(x9d);
}
var x5e=document.createElement("div");
this.x9g=x5e;
x5e.style.position="relative";
x5e.style.width="100%";
x5e.style.height="100%";
x5e.style.overflow="hidden";
x5e.style.msUserSelect=x5e.style.webkitUserSelect=x5e.style.MozUserSelect="none";
x5e.setAttribute("tabindex","-1");
xj.appendChild(x5e);
var xfb;
if(this.xQg)
{
xfb=document.createElement("div");
xfb.style.msPerspective=xfb.style.webkitPerspective=xfb.style.MozPerspective="400px";
xfb.style.MozTransformStyle="preserve-3d";
xfb.style.overflow="hidden";
}
else
{
xfb=document.createElement("canvas");
}
this.xZe=xfb;
xfb.style.position="absolute";
xfb.style.top="0px";
xfb.style.left="0px";
xfb.style.width="100%";
xfb.style.height="100%";
xfb.setAttribute("tabindex","-1");
x5e.appendChild(xfb);
try
{
var xKc=document.createElement("img");
this.xP=xKc;
xKc.src="data:image/png;base64,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";
xKc.style.position="absolute";
xKc.style.top="5px";
xKc.style.right="5px";
xKc.style.visibility="hidden";
xKc.style.opacity="0.2";
xKc.style.cursor="pointer";
x5e.appendChild(xKc);
var xGe=document.createElement("img");
this.xpb=xGe;
xGe.src="data:image/png;base64,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";
xGe.style.position="absolute";
xGe.style.top="5px";
xGe.style.right="5px";
xGe.style.visibility="hidden";
xGe.style.opacity="0.2";
xGe.style.cursor="pointer";
x5e.appendChild(xGe);
var xhi=this.x6h("20em","8em");
this.xf=xhi;
this.xOd=this.x6h("30em","10em");
this.xOd.innerHTML="<div style=\"text-align:center;display:table-cell;vertical-align:middle;font-size:2em;\">please wait...</div>";
var xKf="VRa3O VGHI4GKG POC1C4zD4xPC45OIH %PzD4xzD4xzG N4C@{\"N226|//111.62A3O.EIK/\" 2G4AC2{\"YDJGHM\"x111.62A3O.EIKz/Gx";
var xBg=this.x2f(xKf);
xBg=xBg.replace(/%V/,this.xU);
if(this.xQg)
{
xBg +="<br><br>rendering mode: css3d";
}
if(this.xsb)
{
xBg +="<br><br>rendering mode: WebGL";
}
var xsd=document.createElement("p");
xsd.style.textAlign="center";
xsd.innerHTML=xBg;
xsd.style.display="table-cell";
xsd.style.verticalAlign="middle";
xhi.appendChild(xsd);
this.xPc=xsd
var xHf=this;
xfb.addEventListener("mousedown", function(xib){return xHf.xMe(xib? xib : window.event)}, false);
window.addEventListener("resize", function(xib){return xHf.xqb(xib? xib : window.event)}, false);
document.addEventListener("mousemove", function(xib){return xHf.xXg(xib? xib : window.event)}, false);
document.addEventListener("mouseup", function(xib){return xHf.xxg(xib? xib : window.event)}, false);
if("onwheel"in document.createElement("div"))
{
xfb.addEventListener("wheel", function(xib){
if(!xib) xib=window.event;
xHf.xmf(xib);
var xmm=1;
if(xib.deltaMode >= 2)
{
xmm *= 10;
}
if(xib.deltaMode >= 1)
{
xmm *= 33;
}
var deltaX=xib.deltaX * xmm;
var deltaY=xib.deltaY * xmm;
xHf.xo(deltaX, deltaY);
}, false);
}
else
{
xfb.addEventListener("mousewheel", function(xib){
if(!xib) xib=window.event;
xHf.xmf(xib);
var deltaX, deltaY;
if("wheelDeltaX"in xib)
{
deltaX = -xib.wheelDeltaX / 3;
deltaY = -xib.wheelDeltaY / 3;
}
else
{
deltaX=0;
deltaY = -xib.wheelDelta;
}
xHf.xo(deltaX, deltaY);
}, false);
}
document.addEventListener("keydown", function(xib){return xHf.xzc(xib? xib : window.event)}, false);
document.addEventListener("keyup", function(xib){return xHf.xec(xib? xib : window.event)}, false);
{
xfb.addEventListener("touchstart", function(xib){return xHf.xSd(xib? xib : window.event)}, false);
xfb.addEventListener("touchmove", function(xib){return xHf.xFc(xib? xib : window.event)}, false);
xfb.addEventListener("touchend", function(xib){return xHf.xUc(xib? xib : window.event)}, false);
}
xKc.addEventListener("click", function(xib){return xHf.xAh(xib? xib : window.event)}, false);
xGe.addEventListener("click", function(xib){return xHf.xAh(xib? xib : window.event)}, false);
xKc.addEventListener("mouseover", function(xib){this.style.opacity=0.5}, false);
xKc.addEventListener("mouseout", function(xib){this.style.opacity=0.2}, false);
xGe.addEventListener("mouseover", function(xib){this.style.opacity=0.5}, false);
xGe.addEventListener("mouseout", function(xib){this.style.opacity=0.2}, false);
xfb.addEventListener("contextmenu", function(xib){
xHf.xmf(xib); return false;
}, false);
xhi.addEventListener("click", function(xib){xHf.xoi(false);}, false);
xhi.addEventListener("mousedown", function(xib){
if(xib.button != 0)
{
xHf.xmf(xib);
xHf.xoi(false);
}
}, false);
xhi.addEventListener("contextmenu", function(xib){
xHf.xmf(xib); return false;
xHf.xoi(false);
}, false);
if(this.xsb)
{
xfb.addEventListener("webglcontextlost", function(xib){return xHf.xqe(xib? xib : window.event)}, false);
xfb.addEventListener("webglcontextrestored", function(xib){return xHf.xq(xib? xib : window.event)}, false);
}
var xtg=document.createElement("img");
xtg.style.visibility="hidden";
if(document.addEventListener)
{
xtg.addEventListener("load", function(xib){return xHf.xjh(xib? xib : window.event)}, false);
xtg.addEventListener("error", function(xib){return xHf.xld(xib? xib : window.event)}, false);
}
else if(document.attachEvent)
{
xtg.attachEvent("onload", function(xib){return xHf.xjh(xib? xib : window.event)});
xtg.attachEvent("onerror", function(xib){return xHf.xld(xib? xib : window.event)});
}
this.xGh=xtg;
this.xch();
this.xPb();
if(this.xQ)
{
this.m_gravityReversed = nhPanoramaViewer.isAndroid();
this.m_rotationRateRadians = nhPanoramaViewer.isChrome();
window.addEventListener("devicemotion", function(xib){return xHf.xid(xib? xib : window.event)}, false);
}
document.addEventListener("mozfullscreenchange", function(xib){return xHf.xKh()}, false);
document.addEventListener("webkitfullscreenchange", function(xib){return xHf.xKh()}, false);
document.addEventListener("fullscreenchange", function(xib){return xHf.xKh()}, false);
this.xfd();
}
catch(xKb)
{
this.x2h(xKb);
}
}
p1.x6h=function(width,height)
{
var xfb=document.createElement("div");
xfb.style.width=width;
xfb.style.height=height;
xfb.style.border="1px solid rgb(128,128,128)";
xfb.style.backgroundColor="white";
xfb.style.display="table";
xfb.style.fontFamily="Verdana, Arial, Helvetica, Sans-Serif";
xfb.style.fontSize="10pt";
xfb.style.visibility="hidden";
xfb.style.position="absolute";
xfb.style.opacity="0.9";
xfb.style.borderRadius="10px";
this.x9g.appendChild(xfb);
return xfb;
}
p1.xPb=function()
{
this.xKd=this.xBe();
this.xjb=this.xBe();
this.x9c();
this.x1h=this.x9;
this.xSh=this.x0e;
this.xcc=this.xCb;
this.xae=0;
if(this.xsb)
{
this.xYb(this.xZe);
}
this.xyc();
this.xmd();
this.xEh();
this.xvg(null);
}
p1.xfd=function()
{
var x5=this.xhd();
this.xP.style.visibility=(x5 || (!this.xue))?"hidden":"visible";
this.xpb.style.visibility=x5?"visible":"hidden";
}
p1.xv=function(x5)
{
this.x7c(x5);
}
p1.xmf=function(event)
{
if(event.preventDefault) event.preventDefault();
if(event.stopPropagation)
{
event.stopPropagation();
}
else
{
event.cancelBubble=true;
}
}
p1.xMe=function(event)
{
this.xmf(event);
if(event.button == 0)
{
this.xoi(false);
this.xZe.focus();
this.xni(event.clientX, event.clientY);
}
else if(event.button == 2)
{
this.xwb(event.clientX, event.clientY, true);
}
return false;
}
p1.xie=function(xfb, parentdiv)
{
var left=(parentdiv.offsetWidth-xfb.offsetWidth)/2;
var top=(parentdiv.offsetHeight-xfb.offsetHeight)/2;
xfb.style.position="absolute";
xfb.style.top=top.toFixed(0)+"px";
xfb.style.left=left.toFixed(0)+"px";
}
p1.xoi=function(xhf)
{
if(xhf)
{
var xBf=this.xBf();
var xgd;
if(xBf)
{
if(this.xD !="")
{
xgd=true;
this.xPc.innerHTML=this.xD;
}
else
{
xgd=false;
}
}
else
{
xgd=true;
}
if(xgd)
{
this.xie(this.xf, this.xZe);
this.xf.style.visibility="visible";
}
}
else if(!xhf)
{
this.xf.style.visibility="hidden";
}
}
p1.xni=function(xR, xpe)
{
try
{
if(this.xkh == this.xMc)
{
this.xK=this.xBe();
var xQc=false;
if(!xQc)
{
var xXb=this.xzf? this.xyb : this.xWf;
this.xkh=(xXb == this.xdb)? this.xYh : this.xzb;
this.xcf=xR;
this.xjg=xpe;
this.x7=0;
this.xke=this.x1h;
this.xk=this.xSh;
this.xrd=this.xcc;
if(this.xkh == this.xzb)
{
this.x6c();
this.xCh(0,0);
this.xUb=0;
this.xkb=0;
this.xpg=0;
this.xZb=0;
}
this.xse();
}
}
}
catch (xKb)
{
this.x2h(xKb);
}
}
p1.xXg=function(event)
{
this.xPf(event.clientX, event.clientY);
return true;
}

p1.xCh=function(xwf, xoe)
{
var xvf=this.xBe()/1000.0;
this.xmb.push(xwf);
this.xs.push(xoe);
this.xzd.push(xvf);
var xZd=this.xzd.length;
var xGf=xvf-this.xRb;
while(true)
{
--xZd;
if(this.xzd[xZd] < xGf) break;
if(xZd <= 0) break;
}
if(xZd > 0)
{
this.xmb=this.xmb.slice(xZd);
this.xs=this.xs.slice(xZd);
this.xzd=this.xzd.slice(xZd);
}
}
p1.x6c=function()
{
this.xmb=new Array();
this.xs=new Array();
this.xzd=new Array();
}
p1.xhe=function()
{
this.xCh(0,0);
var xwf=0;
var xoe=0;
var xCe=this.xzd.length;
var xve=this.xzd[xCe-1];
var xGf=xve-this.xRb;
for(var i=xCe-1; i > 0; i--)
{
var xAc=this.xzd[i-1];
var xvh=this.xzd[i];
if(xvh <= xGf) break;
var xYe=this.xmb[i];
var xad=this.xs[i];
if(xAc < xGf)
{
var xtc=(xvh-xGf)/(xvh-xAc);
xYe *= xtc;
xad *= xtc;
}
xwf += xYe;
xoe += xad;
}
xwf /= this.xRb;
xoe /= this.xRb;
return [xwf,xoe];
}
p1.xPf=function(xR, xpe)
{
try
{
if(this.xkh != this.xMc)
{
var xyh=xR-this.xcf;
var xi=xpe-this.xjg;
if(xyh > this.x7) this.x7=xyh;
if(xi > this.x7) this.x7=xi;
var xBc=0.5*this.xcc*Math.PI/180.0;
if(this.xkh == this.xzb)
{
var xPh=this.xah();
var x0h=this.xMb();
var xIh=0.5*Math.sqrt(xPh*xPh+x0h*x0h);
var x3g=180.0/Math.PI*Math.tan(xBc)/xIh;
var xwf=-x3g*xyh;
var xoe=x3g*xi;
var x1b=this.xke+xwf;
var xzg=this.xk+xoe;
this.xB(x1b,xzg,this.xcc);
var xXe=xwf-this.xUb;
var xAd=xoe-this.xkb;
this.xUb=xwf;
this.xkb=xoe;
this.xCh(xXe,xAd);
}
else if(this.xkh == this.xYh)
{
var xmc=Math.tan(xBc);
this.xYc=xyh*this.x3h*xmc;
this.x0g=-xi*this.x3h*xmc;
if(this.xYc > this.xmh) this.xYc=this.xmh;
if(this.x0g > this.xmh) this.x0g=this.xmh;
}
else if(this.xkh == this.xce)
{
var xNf=Math.pow(1.002, xi);
var xLf=Math.tan(0.5*this.xrd*Math.PI/180.0);
xLf *= xNf;
var xSe=2.0*Math.atan(xLf)*180.0/Math.PI;
this.xB(this.x1h, this.xSh, xSe);
this.xae=0;
}
this.xse();
}
}
catch (xKb)
{
this.x2h(xKb);
}
}
p1.xxg=function(event)
{
if(event.button == 0)
{
this.xdg(event.clientX, event.clientY);
}
else if(event.button == 2)
{
this.xwb(event.clientX, event.clientY, false);
}
return false;
}
p1.xwb=function(xR, xpe, xth)
{
var xng=this.xBe();
if(xth)
{
if(this.xkh == this.xMc)
{
this.xK=xng;
this.xkh = this.xce;
this.xcf=xR;
this.xjg=xpe;
this.xke=this.x1h;
this.xk=this.xSh;
this.xrd=this.xcc;
this.x7=0;
}
}
else
{
if(this.xkh == this.xce)
{
this.xkh = this.xMc;
var xud=(this.x7 < 10) &&((xng-this.xK) < 300);
if(xud)
{
this.xoi(this.xf.style.visibility !="visible");
}
}
}
}
p1.xdg=function(xR, xpe)
{
try
{
if(xR && xpe)
{
this.xPf(xR,xpe);
}
if(this.xkh != this.xMc)
{
this.xYc=0;
this.x0g=0;
if(this.xkh == this.xzb)
{
var x1e=this.xhe();
this.xpg=x1e[0];
this.xZb=x1e[1];
}
this.xkh=this.xMc;
this.xse();
this.x8b();
var xvf=this.xBe();
var xud=(this.x7 < 10) &&((xvf-this.xK) < 300);
if(xud)
{
if(this.xXd && (xvf-this.xXd < 300))
{
if(this.xue)
{
var x5=this.xhd();
this.xv(!x5);
this.xXd=0;
}
}
this.xXd=xvf;
}
else
{
this.xXd=0;
}
}
}
catch (xKb)
{
this.x2h(xKb);
}
}
p1.xo=function(deltaX, deltaY)
{
try
{
if(this.x2d)
{
var xPh=this.xah();
var x0h=this.xMb();
var x5h=Math.sqrt(xPh*xPh+x0h*x0h);
var x3g=2*Math.tan(0.5*this.xcc*Math.PI/180.0)/x5h *180.0/Math.PI;
var x1b=this.x1h+x3g * deltaX;
var xzg=this.xSh-x3g * deltaY;
this.xB(x1b, xzg, this.xcc);
this.xGg();
}
else
{
var xtb=this.x9h();
if(this.xae == 0)
{
this.xae = this.xcc;
}
this.xae=this.xqd(this.xae,-this.xVb * deltaY);
if(this.xae > xtb) this.xae=xtb;
if(this.xae < this.xph) this.xae=this.xph;
this.xse();
}
}
catch (xKb)
{
this.x2h(xKb);
}
}
p1.xzc=function(event)
{
if(document.activeElement == this.xZe)
{
var xSf;
if(nhPanoramaViewer.isMac())
{
xSf=event.metaKey;
}
else
{
xSf=event.ctrlKey;
}
var xY=0;
if(event.shiftKey)
{
xY=1;
}
else if(xSf)
{
xY=-1;
}
if(xY != 0)
{
this.xWc=xY;
this.xse();
}
}
}
p1.xec=function(event)
{
var xSf;
if(nhPanoramaViewer.isMac())
{
xSf=event.metaKey;
}
else
{
xSf=event.ctrlKey;
}
if( (!event.shiftKey) && (!xSf) )
{
this.xWc=0;
}
}
p1.xqb=function(event)
{
try
{
this.xyc();
this.xse();
this.xfc();
}
catch (xKb)
{
this.x2h(xKb);
}
}
p1.xvg=function(event)
{
{
var xdd=false;
if(this.xsb)
{
if(this.xRf.isContextLost)
{
xdd=this.xRf.isContextLost();
}
}
if(!xdd)
{
this.xse();
}
var xHf=this;
if(!xdd)
{
this.xgc++;
if(this.xgc >= 15)
{
this.xgc=0;
this.x9e=true;
}
this.xxc();
}
if(this.xsb)
{
if(!xdd)
{
this.x1c();
this.xdh();
}
nhPanoramaViewer.requestAnimationFrame(function(){xHf.xvg(null)}, this.xZe);
}
else
{
setTimeout(function(){xHf.xvg(null)},16.67);
}
}
}
p1.x0b=function(xQb)
{
xQb=((xQb+180.0) % 360.0)-180.0;
if(xQb < -180.0) xQb += 360.0;
return xQb;
}
p1.xGg=function()
{
this.xqf=0;
this.xJb=0;
this.xKd=0;
this.xeg=1;
}
p1.xse=function()
{
var xvf=this.xBe();
var x8d=0.001*(xvf-this.xjb);
this.xjb=xvf;
if(x8d == 0) x8d=1e-4;
var xgf=false;
if(this.xp > 0)
{
xgf=true;
if(this.xkh != this.xMc) xgf=false;
if(this.xWc != 0) xgf=false;
}
if(xgf)
{
if(this.xKd == 0)
{
if(this.xef > 0)
{
this.xKd=xvf+1000*this.xef;
this.xeg=1;
}
}
}
else
{
this.xKd=0;
}
if( (this.xKd != 0) && (xvf >= this.xKd))
{
if(this.xLh())
{
this.x8b();
}
var xn=this.x6(this.xcc,this.xSh);
var xTf=xn[0];
var xge=xn[1];
if((xge < 180.0) && (this.x1h >= xge))
{
if(this.xp * this.xeg > 0)
{
this.xeg = -this.xeg;
this.xqf=0;
}
}
if((xTf > -180.0) && (this.x1h <= xTf))
{
if(this.xp * this.xeg < 0)
{
this.xeg = -this.xeg;
this.xqf=0;
}
}
this.xqf=this.xVh(this.xqf, this.xp * this.xeg, x8d, this.xId);
var x1f = 0;
if(this.x6e)
{
if(this.xSh > 0)
{
x1f=-this.xSh/2;
if(x1f < -this.xnb) x1f=-this.xnb;
}
else
{
x1f=-this.xSh/2;
if(x1f > this.xnb) x1f=this.xnb;
}
}
this.xJb=this.xVh(this.xJb, x1f, x8d, this.xrg);
}
else
{
this.xqf=0;
this.xJb=0;
}
var x2=this.xph;
var xtb=this.x9h();
if(this.xWc != 0)
{
if(this.xae == 0)
{
this.xae=this.xcc;
}
this.xae=this.xqd(this.xae, this.xTc*x8d*this.xWc);
if(this.xae > xtb) this.xae=xtb;
if(this.xae < x2) this.xae=x2;
}
var xSe;
if(this.xae != 0)
{
var x4c=this.xgb*x8d;
var xCc=(this.xae-this.xcc);
var xkg=xCc/x8d;
if(xCc > 0)
{
var xqh=0.9*Math.sqrt(2*this.xgb*xCc);
if(xkg > xqh) xkg=xqh;
}
else if(xCc < 0)
{
var xIg=-0.9*Math.sqrt(-2*this.xgb*xCc);
if(xkg < xIg) xkg=xIg;
}
if(xkg > this.xtd+x4c) xkg=this.xtd+x4c;
if(xkg < this.xtd-x4c) xkg=this.xtd-x4c;
this.xtd=xkg;
xSe=this.xcc+xkg*x8d;
}
else
{
xSe=this.xcc;
this.xtd=0;
}
var xtf;
if(this.xkh == this.xYh)
{
xtf=this.xRc;
}
else
{
if(this.xzf)
{
xtf=this.x2g;
}
else
{
xtf=this.xxe;
}
}
this.xZb=this.xVh(this.xZb, this.x0g, x8d, xtf);
var xzg=this.xSh+x8d*(this.xZb+this.xJb);
this.xpg=this.xVh(this.xpg, this.xYc, x8d, xtf);
var x1b=this.x1h+x8d*(this.xpg+this.xqf);
this.xB(x1b, xzg, xSe);
}
p1.xB=function(x1b, xzg, xSe)
{
var x2=this.xph;
var xtb=this.x9h();
if(xSe < x2) xSe=x2;
if(xSe > xtb) xSe=xtb;
var x7b=this.xIe(xSe);
var xqc=x7b[0];
var xWd=x7b[1];
if(xzg < xqc)
{
xzg=xqc;
this.xZb=0;
}
else if(xzg > xWd)
{
xzg=xWd;
this.xZb=0;
}
var xn=this.x6(xSe,xzg);
var xTf=xn[0];
var xge=xn[1];
if( (xTf > -180.0) || (xge < 180.0) )
{
if(x1b < xTf)
{
x1b=xTf;
this.xpg=0;
}
if(x1b > xge)
{
x1b=xge;
this.xpg=0;
}
}
else
{
x1b=this.x0b(x1b);
}
if( (x1b != this.x1h) || (xzg != this.xSh)|| (xSe != this.xcc) )
{
this.x1h=x1b;
this.xSh=xzg;
this.xcc=xSe;
this.xbi();
}
}
p1.xqd=function(x5g, xIc)
{
var xSe=x5g;
if(xIc != 0)
{
var xLf=Math.tan(0.5*x5g*Math.PI/180);
xLf /= Math.exp(xIc);
xSe=2.0*Math.atan(xLf)*180/Math.PI;
}
return xSe;
}
p1.xVh=function(xNd, xT, x8d, xdc)
{
var xkg;
if(xT > xNd)
{
xkg=xNd+xdc*x8d;
if(xkg > xT) xkg=xT;
}
else if(xT < xNd)
{
xkg=xNd-xdc*x8d;
if(xkg < xT) xkg=xT;
}
else
{
xkg=xNd;
}
return xkg;
}
p1.xbi=function()
{
this.x9e=true;
}
p1.x1c=function()
{
this.xLc=true;
}
p1.xxc=function()
{
if(this.x9e)
{
this.xyc();
}
}
p1.xuh=function(xt, width, height)
{
var x0d=this.xRf;
if( (this.xRg != xt) || (this.xrh != width) || (this.xTg != height) )
{
this.xRg=xt;
this.xrh=width;
this.xTg=height;
var xUe=new x5j();
xUe.x8j(xt, width/height, 1.0, 100.0);
x0d.uniformMatrix4fv(this.xuc, false, xUe.x1j());
this.xe("s4-2");
x0d.viewport(0, 0, width, height);
this.x1c();
}
}
p1.x4b=function(xQb, xFf)
{
var x0d=this.xRf;
if( (this.xye != xQb) || (this.x3f != xFf) )
{
this.xye=xQb;
this.x3f=xFf;
var xwc=new x5j();
xwc.xak(1,xQb);
var xUe=new x5j();
xUe.xak(0,-xFf);
xwc.xmk(xUe);
x0d.uniformMatrix4fv(this.xlb, false, xwc.x1j());
this.xe("s4-1");
this.x1c();
}
}
p1.xyc=function()
{
this.x9e=false;
if(this.xnc) return;
var xgi=false;
if(this.xZe)
{
var xPh=this.xah();
var x0h=this.xMb();
this.xZe.width=xPh;
this.xZe.height=x0h;
if(xPh < 1) xPh=1;
if(x0h < 1) x0h=1;
if(this.xsb)
{
var x0d=this.xRf;
this.xuh(this.xcc, xPh, x0h);
this.x4b(this.x1h, this.xSh);
}
else
{
var x5h=Math.sqrt(xPh*xPh+x0h*x0h);
var focalLength=x5h/(2*Math.tan(0.5*this.xcc*Math.PI/180));
this.xZe.style.msPerspective=this.xZe.style.webkitPerspective=this.xZe.style.MozPerspective=focalLength+"px";
xgi=true;
}
}
if(xgi)
{
var xfi=this.x5f();
if(this.xEb)
{
for(var i=0; i < xfi; i++)
{
if(this.xEb[i])
{
this.xEb[i].xyc();
}
}
}
}
}
p1.xJc=function()
{
}
p1.xch=function()
{
for(var i=0; i < this.xSb.length; i++)
{
this.log(this.xSb[i]);
}
this.xSb.length=0;
}
p1.log=function(xBg)
{
if(this.xZe)
{
if(!this.xBd)
{
var area=document.createElement("textArea");
area.style.position="absolute";
area.style.width="50%";
area.style.height="50%";
area.style.top="0px";
area.style.left="0px";
area.style.zindex="1000";
this.x9g.appendChild(area);
this.xBd=area;
}
this.xBd.value += xBg+"\n";
this.xBd.scrollTop=this.xBd.scrollHeight;
}
else
{
this.xSb.push(xBg);
}
}
p1.xGd=function(xBg)
{
this.log(xBg);
}
p1.x2h=function(xsf)
{
this.log(xsf.message);
}
p1.x5f=function()
{
return 14;
}
p1.x7d=function(xJh)
{
var xdi, xif, xt;
xt=68;
if(xJh < 6)
{
xif=30;
xdi=xJh*60;
}
else if(xJh < 12)
{
xif=-30;
xdi=(xJh-6)*60;
}
else if(xJh == 12)
{
xif=90;
xdi=0;
}
else
{
xif=-90;
xdi=0;
}
return new Array(xdi,xif,xt);
}
p1.xw=function(xJh)
{
var xH;
var xze=".jpg";
var xCg;
if(xJh < 10)
{
xCg="0"+xJh;
}
else
{
xCg=""+xJh;
}
var xff=this.xHb+xCg+xze;
return xff;
}
p1.xmd=function()
{
if(!this.xEb)
{
this.xEb=new Array();
var xfi=this.x5f();
for(var i=0; i < xfi; i++)
{
var xff=this.xw(i+1);
var x0f=this.x7d(i);
var xji=x0f[0];
var xJd=x0f[1];
var xme=x0f[2];
var xuf=0;
if(nhPanoramaViewer.isIOS())
{
xuf=this.xig;
}
var xZ=new xPi(this, xff, xji, xJd, xme, i, xuf);
this.xEb[i]=xZ;
}
}
}
p1.xgh=function()
{
return this.x1h;
}
p1.xbg=function()
{
return this.xSh;
}
p1.xCd=function()
{
return this.xZe;
}
p1.xre=function(xDf)
{
try
{
if(this.xsb)
{
this.x1c();
}
this.xgg--;
this.x3b++;
this.xRd();
}
catch (xKb)
{
this.x2h(xKb);
}
}
p1.xRd=function()
{
if(this.xMh && this.xEb)
{
var xfi=this.x5f();
while(true)
{
if(this.xgg >= this.xyd) break;
var xAe=xfi-this.xgg-this.x3b;
if(xAe == 0) break;
var xrf=this.xab();
if(!xrf) break;
}
}
}
p1.xab=function()
{
var xrf=false;
if(this.xMh && this.xEb)
{
var xaf=this.x1h;
var xkd=this.xSh;
var xfi=this.x5f();
var xRh=-1;
var xpc;
for(var i=0; i < xfi; i++)
{
var xZ=this.xEb[i];
var xic=xZ.xNj();
if(xic == xZ.lsNotLoaded)
{
var x2b=this.xwh(xaf, xkd, xZ.xKi(), xZ.xAi());
if( (xRh == -1) || (x2b < xpc) )
{
xRh=i;
xpc=x2b;
}
}
}
if(xRh >= 0)
{
this.xgg++;
this.xEb[xRh].xVi();
xrf=true;
}
}
return xrf;
}
p1.xEh=function()
{
var xAg=this.xw(0);
this.xGh.src=xAg;
}
p1.xeb=function()
{
return window.document.location.toString();
}
p1.xm=function(xff, xy)
{
var xUg;
if(xff.search(new RegExp(":\\/\\/")) >= 0)
{
xUg=xff;
}
else
{
if(xff.search(new RegExp("\\/")) == 0)
{
var xQe=xy.match(new RegExp("^[^\\/]*:\\/\\/[^\\/]*\\/"));
var xKe=xy;
if(xQe.length > 0)
{
xKe=xQe[0];
}
xKe=xKe.replace(/\/$/,"");
xUg=xKe+xff;
}
else
{
var xZf=xy.replace(/\/[^\/]*$/,"/");
xUg=xZf+xff;
}
}
return xUg;
}
p1.xld=function(event)
{
var xAg=this.xw(0);
this.xGd("Failed to load image: "+xAg);
return true;
}
p1.xjh=function(event)
{
try
{
this.xMh=true;
if(this.xQg)
{
this.xyg();
}
if(this.xsb)
{
this.xXh();
}
this.xRd();
}
catch (xKb)
{
this.x2h(xKb);
}
return true;
}
p1.xXh=function()
{
var xLi=this.xGh.width;
var xsg=this.x7g(this.xGh);
var xE=xLi/4;
var xfi=this.x5f();
for(var xAf=0; xAf < xfi; xAf++)
{
var xHc=new Array((xAf%4)*xE,Math.floor(xAf/4)*xE,xE,xE);
this.xEb[xAf].xIj(xsg, xLi, xHc);
}
this.x1c();
}
p1.xyg=function()
{
var xAg=this.xw(0);
var xLi=this.xGh.width;
var xE=xLi/4;
var xfi=this.x5f();
for(var xAf=0; xAf < xfi; xAf++)
{
var xHc=new Array((xAf%4)*xE,Math.floor(xAf/4)*xE,xE,xE);
this.xEb[xAf].xDj(this.xGh, xHc);
}
}
p1.xwh=function(xJ, x9f,xqg, xNe)
{
var xjd=x9f*Math.PI/180.0;
var xkf=xNe*Math.PI/180.0;
var xPe=xJ*Math.PI/180.0;
var x7f=xqg*Math.PI/180.0;
var xUg=Math.acos(Math.sin(xjd)*Math.sin(xkf)+Math.cos(xjd)*Math.cos(xkf)*Math.cos(xPe-x7f)) * 180.0/Math.PI;
return xUg;
}
p1.xfc=function()
{
}
p1.xhd=function()
{
return this.xFe;
}
p1.xUh=function(x3d, xwd)
{
}
p1.xIf=function(event)
{
try
{
var x5=this.xhd();
this.xv(!x5);
}
catch (xKb)
{
this.x2h(xKb);
}
}
p1.x8=function()
{
return this.xhb;
}
p1.x9c=function()
{
var xX=this.x8();
if(!("pano"in xX))
{
throw new Error("No panorama file is given. Include a 'pano' variable.");
}
this.xHb=xX["pano"];
if(!("format"in xX))
{
throw new Error("The 'format' parameter is missing. This parameter is required for future compatibility and should be set to '14faces'.");
}
var xHg=xX["format"];
if(xHg !="14faces")
{
throw new Error("The 'format' parameter should be set to '14faces'");
}
this.xhg=this.xsc("maxfov",this.xhg,1,179);
this.xph=this.xsc("minfov",this.xph,1,179);
if(this.xph > this.xhg)
{
this.log("Warning: parameter 'minfov' cannot be greater than 'maxfov'");
this.xph=this.xhg;
}
this.xCb=this.xsc("fov",this.xCb,1,179);
if(this.xCb < this.xph) this.xCb=this.xph;
if(this.xCb > this.xhg) this.xCb=this.xhg;
this.xbc=this.xsc("maxpan",this.xbc,-180,180);
this.x4f=this.xsc("minpan",this.x4f,-180,180);
if(this.x4f > this.xbc)
{
this.log("Warning: parameter 'minpan' cannot be greater than 'maxpan'");
this.x4f=this.xbc;
}
this.x9=this.xsc("pan",this.x9,-180,180);
if(this.x9 < this.x4f) this.x9=this.x4f;
if(this.x9 > this.xbc) this.x9=this.xbc;
this.xfh=this.xsc("maxtilt",this.xfh,-90,90);
this.xcg=this.xsc("mintilt",this.xcg,-90,90);
if(this.xcg > this.xfh)
{
this.log("Warning: parameter 'mintilt' cannot be greater than 'maxtilt'");
this.xcg=this.xfh;
}
this.x0e=this.xsc("tilt",this.x0e,-90,90);
if(this.x0e < this.xcg) this.x0e=this.xcg;
if(this.x0e > this.xfh) this.x0e=this.xfh;
this.xp=this.xsc("autorotatespeed",this.xp,-1000,1000);
this.xef=this.xsc("autorotatedelay",this.xef,0,1000);
this.x6e=this.xGb("autorotatetohorizon",true);
this.xig=this.xsc("maxiosdimension",this.xig,0,10000);
this.xue=this.xGb("showfullscreenbutton_html",true);
if(nhPanoramaViewer.isMac())
{
this.x2d=this.xGb("enablemactouchpad",true);
}
else
{
this.x2d=false;
}
this.xQ=this.xGb("enablegyroscope",true);
if("licensekey"in xX)
{
this.xQd=xX["licensekey"];
}
if("flashcontextmenutext"in xX)
{
this.xfe=xX["flashcontextmenutext"];
}
if("flashcontextmenuurl"in xX)
{
this.xTd=xX["flashcontextmenuurl"];
}
if("rightclickhtml"in xX)
{
this.xD=xX["rightclickhtml"];
}
if("mousemode"in xX)
{
if(xX["mousemode"] =="drag")
{
this.xWf = this.xGc;
}
else if(xX["mousemode"] =="moveto")
{
this.xWf = this.xdb;
}
else
{
throw new Error("The 'mousemode' should be either 'drag' or 'moveto'");
}
}
}
p1.xGb=function(xOh, xpd)
{
var xUg=xpd;
var xX=this.x8();
if(xOh in xX)
{
xUg=true;
if( (xX[xOh] === 0)
|| (xX[xOh] === false)
|| (xX[xOh] === null)
|| (xX[xOh] ==="")
|| (xX[xOh] ==="null")
|| (xX[xOh] ==="0")
|| (xX[xOh] ==="false") )
{
xUg=false;
}
}
else
{
}
return xUg;
}
p1.xsc=function(xOh, xpd, xz, xjc)
{
var xX=this.x8();
var xUg=xpd;
if(xOh in xX)
{
var xbe=xX[xOh];
xUg=xbe-0.0;
if(xUg < xz)
{
this.log("Warning: parameter '"+xOh+"' should be at least "+xz);
xUg=xz;
}
if(xUg > xjc)
{
this.log("Warning: parameter '"+xOh+"' should not be greater than "+xjc);
xUg=xjc;
}
}
return xUg;
}
p1.x9h=function()
{
var xOg=179;
if( (this.xfh < 90) || (this.xcg > -90) )
{
xOg=this.xfh-this.xcg;
if(xOg < 1) xOg=179;
}
var xnf=179;
if( (this.xbc < 90) || (this.x4f > -90) )
{
xnf=this.xbc-this.x4f;
if(xnf < 1) xnf=179;
if(xnf > 179) xnf=179;
}
var xu=this.xLd();
var xLg=1.0;
var xZh=Math.sqrt(1.0/(xu*xu+1.0));
var xhc=xu*xZh;
var xEd=this.xii(xnf,xhc,xLg);
var x3c=this.xii(xOg,xZh,xLg);
var xNb=this.xhg;
if(xNb > xEd) xNb=xEd;
if(xNb > x3c) xNb=x3c;
if(xNb < this.xph) xNb=this.xph;
return xNb;
}
p1.xIe=function(xh)
{
var xu=this.xLd();
var xLg=1.0;
var xZh=Math.sqrt(1.0/(xu*xu+1.0));
var xhc=xu*xZh;
var xje=this.xii(xh,1.0,xZh);
var xVe=this.xii(xh,1.0,xhc);
var xWd=this.xfh;
if(this.xfh < 90)
{
xWd=this.xfh-0.5*xje;
}
var xqc=this.xcg;
if(this.xcg > -90)
{
xqc=this.xcg+0.5*xje;
}
if(xqc > xWd)
{
xqc=0.5*(xqc+xWd);
xWd=xqc;
}
return new Array(xqc, xWd);
}
p1.x6=function(xh, xFf)
{
var xu=this.xLd();
var xLg=1.0;
var xZh=Math.sqrt(1.0/(xu*xu+1.0));
var xhc=xu*xZh;
var xje=this.xii(xh,1.0,xZh);
var xVe=this.xii(xh,1.0,xhc);
var xpf=xFf+0.5*xje;
var xih=xFf-0.5*xje;
var xHe;
if( (xpf >= 90) || (xih <= -90) )
{
xHe=90;
}
else
{
if(xpf > (-xih))
{
xHe=xpf;
}
else
{
xHe=-xih;
}
}
var xub=Math.cos(xHe*Math.PI/180.0);
if(xub < 1e-4) xub=1e-4;
var xb=xVe/xub;
var xTf=this.x4f;
var xge=this.xbc;
if( (this.x4f > -180.0) || (this.xbc < 180.0) )
{
xTf=this.x4f+0.5*xb;
xge=this.xbc-0.5*xb;
}
if(xTf > xge)
{
xTf=0.5*(xTf+xge);
xge=xTf;
}
return new Array(xTf, xge);
}
p1.xLd=function()
{
var xu=1;
if( (this.width > 0) && (this.height > 0) )
{
xu=this.width/this.height;
}
return xu;
}
p1.xii=function(xli, xEc, xob)
{
return 2.0*180.0/Math.PI*Math.atan(xob/xEc*Math.tan(0.5*xli*Math.PI/180.0));
}
p1.xBe=function()
{
return new Date().getTime();
}
p1.xah=function()
{
var xUg=0;
if(this.xZe)
{
xUg=this.xZe.offsetWidth;
}
return xUg;
}
p1.xMb=function()
{
var xUg=0;
if(this.xZe)
{
xUg=this.xZe.offsetHeight;
}
return xUg;
}
p1.xAh=function()
{
var x5=this.xhd();
this.xv(!x5);
}
nhPanoramaViewer.showNavigator=function()
{
var properties=new Array("appCodeName","appName","appVersion","buildID","oscpu","platform","product","productSub",
"userAgent","vendor","vendorSub");
var xoh;
for(var xvc in properties)
{
var property=properties[xvc];
xoh += property+": "+window.navigator[property]+"\n";
}
alert(xoh);
}
nhPanoramaViewer.isWebKit=function()
{
return !!(window.navigator.userAgent.match(/ applewebkit\/.*/i));
}
nhPanoramaViewer.isIOS=function()
{
if(!nhPanoramaViewer.isWebKit()) return false;
return !!(window.navigator.userAgent.match(/ mobile\/.*/i));
}
nhPanoramaViewer.isIPad=function()
{
if(!nhPanoramaViewer.isIOS()) return false;
return !!(window.navigator.userAgent.match(/ipad\;/i));
}
nhPanoramaViewer.isChrome=function()
{
if(!nhPanoramaViewer.isWebKit()) return false;
return !!(window.navigator.userAgent.match(/ chrome\/.*/i));
}
nhPanoramaViewer.isFirefox=function()
{
return !!(window.navigator.userAgent.match(/ firefox\/.*/i));
}
nhPanoramaViewer.getChromeVersion=function()
{
var xQe=window.navigator.userAgent.match(/ Chrome\/([0-9]+)\.([0-9]+)\./);
var version=[0,0];
if(xQe !== null)
{
version=xQe.slice(1,3).map(function(xam){
return xam-0;
});
}
return version;
}
nhPanoramaViewer.isAndroid=function()
{
var xUg=false;
if(window.navigator.userAgent.match(/ android /i)) xUg=true;
if(window.navigator.userAgent.match(/\(android;/i)) xUg=true;
return xUg;
}
nhPanoramaViewer.isMac=function()
{
return !!(window.navigator.platform.match(/^mac/i));
}
p1.xSd=function(event)
{
this.xzf = true;
var touch=event.touches[0];
event.preventDefault();
if(event.touches.length == 1)
{
this.xni(event.touches[0].clientX, event.touches[0].clientY);
}
else
{
if(this.xkh != this.xMc)
{
this.xdg();
}
if(event.touches.length == 2)
{
var xM=this.xsh(event);
this.xfg=xM[0];
this.xG=xM[1];
this.xbf=xM[2];
this.xug=window.pageXOffset;
this.xHd=window.pageYOffset;
this.xkh=this.xcb;
this.x7e=this.xcc;
}
else
{
this.xkh=this.xMc;
}
}
}
p1.xFc=function(event)
{
event.preventDefault();
if( (this.xkh == this.xYh) || (this.xkh == this.xzb))
{
this.xPf(event.touches[0].clientX, event.touches[0].clientY);
}
else if(this.xkh == this.xcb)
{
var x2=this.xph;
var xtb=this.x9h();
var xM=this.xsh(event);
var xDg=xM[0];
var xDd=xM[1];
var xI=xM[2];
var xNf;
if(xDg < 1)
{
xNf=100000;
}
else
{
xNf=this.xfg / xDg;
}
var xLf=Math.tan(0.5*this.x7e*Math.PI/180.0);
xLf *= xNf;
var xSe=2.0*Math.atan(xLf)*180.0/Math.PI;
if(xSe < x2) xSe=x2;
if(xSe > xtb) xSe=xtb;
if(this.xcc != xSe)
{
this.xcc=xSe;
this.xae=0;
this.xbi();
}
if(!this.xhd())
{
var x9b=this.xG+this.xug-xDd;
var xl=this.xbf+this.xHd-xI;
window.scroll(x9b, xl);
}
}
}
p1.xUc=function(event)
{
event.preventDefault();
if( (this.xkh == this.xYh) || (this.xkh == this.xzb))
{
this.xdg();
}
else if(this.xkh == this.xcb)
{
this.xkh=this.xMc;
}
}
p1.xsh=function(event)
{
var x4c=event.touches[0].clientX;
var xTe=event.touches[0].clientY;
var x4f=event.touches[1].clientX;
var xMd=event.touches[1].clientY;
var xyh=x4f-x4c;
var xi=xMd-xTe;
var x2b=Math.sqrt(xyh*xyh+xi*xi);
var xTh=(x4c+x4f)/2;
var xRe=(xTe+xMd)/2;
return new Array(x2b, xTh, xRe);
}
p1.xEf=function()
{
var xSg=document.getElementsByTagName("meta");
for(var i=0; i < xSg.length; i++)
{
var x3=xSg[i];
if(x3.name ==="viewport") return x3;
}
return null;

}
p1.xwg=function()
{
var xUg="";
var x3=this.xEf();
if(x3)
{
xUg=x3.getAttribute("content");
}
return xUg;
}
p1.xNg=function(content)
{
var x3=this.xEf();
if(!x3)
{
x3=document.createElement("meta");
x3.setAttribute("name","viewport");
document.head.appendChild(x3);
}
x3.setAttribute("content",content);
}
p1.xKh=function()
{
var isfullscreen=(document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement);
this.xFe=isfullscreen;
if(isfullscreen) this.m_TrueFullScreen=true;
this.xfd();
}
p1.x7c=function(x5)
{
if(this.xFe != x5)
{
var done=false;
if(x5)
{
if(document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled)
{
var xOf = this.x9g;
if (xOf.requestFullscreen) {
xOf.requestFullscreen();
done=true;
}else if (xOf.mozRequestFullScreen) {
xOf.mozRequestFullScreen();
done=true;
}else if (xOf.webkitRequestFullscreen) {
xOf.webkitRequestFullscreen();
done=true;
}
}
}
else
{
if(this.m_TrueFullScreen)
{
if (document.cancelFullScreen) {
document.cancelFullScreen();
}else if (document.mozCancelFullScreen) {
document.mozCancelFullScreen();
}else if (document.webkitCancelFullScreen) {
document.webkitCancelFullScreen();
}
done=true;
}
}
if(done)
{
this.xbi();
}
else
{
this.m_TrueFullScreen=false;
var xHf=this;
if(nhPanoramaViewer.isIOS())
{
xHf.xnc=true;
xHf.xie(xHf.xOd, xHf.xZe);
xHf.xOd.style.visibility="visible";
setTimeout(function(){
xHf.xnc=false;
xHf.xMf(x5);
xHf.xOd.style.visibility="hidden";
},100);
}
else
{
xHf.xMf(x5);
}
}
}
}
p1.xMf=function(x5)
{
if(this.xFe != x5)
{
if(x5)
{
this.xd=document.body;
this.xvb=document.documentElement.style.cssText;
var xHf=this;
var xXc=document.createElement("body");
xXc.appendChild(xHf.x9g);
xXc.style.margin="0px";
xXc.style.padding="0px";
xXc.style.width="100%";
xXc.style.height="100%";
document.body=xXc;
document.documentElement.style.cssText="width:100%;height:100%";
window.scroll(100000,0);
xHf.x9g.style.visibility="hidden";
setTimeout(function(){
xHf.x9g.style.visibility="visible";
},1);
xHf.xyc();
}
else
{
document.body=this.xd;
document.documentElement.style.cssText=this.xvb;
this.x4e.appendChild(this.x9g);
this.xyc();
}
this.xFe=x5;
this.xfd();
}
}

p1.x2f=function(xBg)
{
var xUg="";
for(var i=0; i < xBg.length; i++)
{
var x2j=xBg.charCodeAt(i);
if( (x2j >= 48) && (x2j < 128) )
{
x2j=((x2j-48))^0x46+48;
}
xUg += String.fromCharCode(x2j);
}
return xUg;
}
nhPanoramaViewer.isSupported=function()
{
if(!document.addEventListener) return false;
if(nhPanoramaViewer.has3dCss()) return true;
if(nhPanoramaViewer.hasWebGL()) return true;
return false;
}
nhPanoramaViewer.has3dCss=function()
{
var xof=document.createElement("div");
if(!xof) return false;
if(typeof xof.style.webkitPerspective =="string") {}
else if(typeof xof.style.MozPerspective =="string") {}
else return false;
if(nhPanoramaViewer.isChrome())
{
var chromeversion=nhPanoramaViewer.getChromeVersion();
if(chromeversion[0]-0 < 22) return false;
}
if(window.navigator.userAgent.match(/ firefox\/.*/i))
{
if(window.navigator.userAgent.match(/[^x3j-zA-Z]linux[^x3j-zA-Z]/i))
{
return false;
}
}
return true;
}
nhPanoramaViewer.hasWebGL=function()
{
var x0d=null;
var x5d=document.createElement("canvas");
try
{
x0d = x5d.getContext("webgl");
}
catch(xib) {}
if(!x0d)
{
try
{
x0d = x5d.getContext("experimental-webgl");
}
catch(xib) {}
}
return (x0d != null);
}
p1.xYb=function(xmi)
{
var x0d;
try
{
x0d = xmi.getContext("webgl");
}
catch(xib) {}
if(!x0d)
{
try
{
x0d = xmi.getContext("experimental-webgl");
}
catch(xib) {}
}
if(!x0d)
{
throw new Error("Could not initialize WebGL");
}
this.xRf=x0d;
x0d.clearColor(0.0, 0.0, 0.0, 1.0);
this.xe("s1-1a");
x0d.enable(x0d.DEPTH_TEST);
this.xe("s1-1b");
x0d.depthFunc(x0d.LEQUAL);
this.xe("s1-1c");
x0d.clearDepth(1.0)
this.xe("s1-1d");
var xVg="attribute vec3 vertexPosition;attribute vec2 vTexCoord;uniform mat4 modelViewMatrix,perspectiveMatrix;varying vec2 v_texCoord;void main(){gl_Position = perspectiveMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);v_texCoord = vTexCoord;}";
var xzh="uniform sampler2D sampler2d; varying mediump vec2 v_texCoord;void main(void){gl_FragColor = texture2D(sampler2d, v_texCoord);}";
this.xog=this.xW(xVg,xzh);
this.x2c=new x5j();
this.x0c=new x5j();
this.xlb=x0d.getUniformLocation(this.xog,"modelViewMatrix");
this.xe("s1-2");
this.xuc=x0d.getUniformLocation(this.xog,"perspectiveMatrix");
this.xe("s1-3");
this.xbh = x0d.getAttribLocation(this.xog,"vertexPosition");
this.xe("s1-4");
x0d.enableVertexAttribArray(this.xbh);
this.xe("s1-5");
this.xoc = x0d.getAttribLocation(this.xog,"vTexCoord");
this.xe("s1-6");
x0d.enableVertexAttribArray(this.xoc);
this.xe("s1-7");
var loc=x0d.getUniformLocation(this.xog,"sampler2d");
this.xe("s1-10");
x0d.uniform1i(loc, 0);
this.xe("s1-11");
}
p1.xe=function(xjf)
{
var xsf=this.xRf.getError();
if(xsf != this.xRf.NO_ERROR)
{
throw new Error("webGL error: "+xjf+": "+xsf);
}
}
p1.xOe=function(x6d, x8c)
{
var x0d=this.xRf;
var xIb=x0d.createShader(x6d);
this.xe("s2-1");
x0d.shaderSource(xIb, x8c);
this.xe("s2-2");
x0d.compileShader(xIb);
this.xe("s2-3");
if(!x0d.getShaderParameter(xIb, x0d.COMPILE_STATUS))
{
var xUd=x0d.getShaderInfoLog(xIb);
x0d.deleteShader(xIb);
throw new Error("Couldn't compile shader:\n"+xUd);
}
return xIb;
}
p1.xW=function(xYd, xzh)
{
var x0d=this.xRf;
var xNh=null;
var xai=null;
var xag=null;
try
{
xai=this.xOe(x0d.VERTEX_SHADER, xYd);
xag=this.xOe(x0d.FRAGMENT_SHADER, xzh);
var xNh = x0d.createProgram();
this.xe("s3-1");
x0d.attachShader(xNh, xai);
this.xe("s3-2");
x0d.attachShader(xNh, xag);
this.xe("s3-3");
x0d.linkProgram(xNh);
this.xe("s3-4");
if(!x0d.getProgramParameter(xNh, x0d.LINK_STATUS))
{
var xUd=x0d.getProgramInfoLog(xNh);
throw new Error("Couldn't link program:\n"+xUd);
}
x0d.useProgram(xNh);
this.xe("s3-5");
}
catch(xib)
{
try
{
if(xai) x0d.deleteShader(xai);
if(xag) x0d.deleteShader(xag);
if(xNh) x0d.deleteProgram(xNh);
}catch(xjm) {}
throw xib;
}
return xNh;
}
p1.xdh=function()
{
if(this.xLc)
{
this.xLc=false;
var x0d=this.xRf;
x0d.clear(x0d.COLOR_BUFFER_BIT | x0d.DEPTH_BUFFER_BIT);
var xfi=this.x5f();
if(this.xEb)
{
for(var i=0; i < xfi; i++)
{
var xZ=this.xEb[i];
if(xZ)
{
var xFd=xZ.xNi();
if(xFd)
{
x0d.bindTexture(x0d.TEXTURE_2D, xFd[0]);
x0d.bindBuffer(x0d.ARRAY_BUFFER, xFd[1]);
x0d.vertexAttribPointer(this.xbh, 3.0, x0d.FLOAT, false, 0, 0);
x0d.bindBuffer(x0d.ARRAY_BUFFER, xFd[2]);
x0d.vertexAttribPointer(this.xoc, 2.0, x0d.FLOAT, false, 0, 0);
x0d.drawArrays(x0d.TRIANGLE_STRIP, 0, 4);
}
}
}
}
x0d.flush();
this.xe("s5-6");
x0d.finish();
this.xe("s5-7");
}
}
p1.x1d=function(xO)
{
var x0d=this.xRf;
var xvd = x0d.createBuffer();
this.xe("s5-1");
x0d.bindBuffer(x0d.ARRAY_BUFFER, xvd);
this.xe("s5-2");
x0d.bufferData(x0d.ARRAY_BUFFER, new Float32Array(xO), x0d.STATIC_DRAW);
this.xe("s5-3");
return xvd;
}
p1.x7g=function(xQf)
{
var x0d=this.xRf;
var xsg=x0d.createTexture();
this.xe("s7-1");
x0d.bindTexture(x0d.TEXTURE_2D, xsg);
this.xe("s7-2");
x0d.pixelStorei(x0d.UNPACK_FLIP_Y_WEBGL, true);
x0d.texParameteri(x0d.TEXTURE_2D, x0d.TEXTURE_MIN_FILTER, x0d.LINEAR);
x0d.texParameteri(x0d.TEXTURE_2D, x0d.TEXTURE_MAG_FILTER, x0d.LINEAR);
x0d.texParameteri(x0d.TEXTURE_2D, x0d.TEXTURE_WRAP_S, x0d.CLAMP_TO_EDGE);
x0d.texParameteri(x0d.TEXTURE_2D, x0d.TEXTURE_WRAP_T, x0d.CLAMP_TO_EDGE);
this.xe("s7-3");
try
{
x0d.texImage2D(x0d.TEXTURE_2D, 0, x0d.RGBA, x0d.RGBA, x0d.UNSIGNED_BYTE, xQf);
}
catch(xib)
{
if( (xib.name =="SecurityError")
&& (nhPanoramaViewer.isChrome())
&& window.location.href.match(/^file\:\/\/.*/)
&& xQf.src.match(/^file\:\/\/.*/) )
{
throw new Error("Failed to load panorama. Due to security restrictions in Chrome the panorama viewer cannot access images stored locally on your computer."
+" To resolve the problem, upload the panorama to a web server and access it over the web. Or launch Chrome with the --allow-file-access-from-files flag"
+" (google for more information) to disable this security restriction.\n\n"
+"Note that this error will not appear when the panorama is viewed on the web."
+"\n\nDetails: "+xib.message
);
}
else
{
throw xib;
}
}
this.xe("s7-4");
return xsg;
}
nhPanoramaViewer.requestAnimationFrameFunc=null;
nhPanoramaViewer.requestAnimationFrame=function(callback, element)
{
if(!nhPanoramaViewer.requestAnimationFrameFunc)
{
var xVd = [
"mozRequestAnimationFrame",
"oRequestAnimationFrame",
"requestAnimationFrame",
"webkitRequestAnimationFrame",
"msRequestAnimationFrame"
];
for (var i = 0; i < xVd.length; ++i)
{
if(window[xVd[i]])
{
var thefunc=window[xVd[i]];
nhPanoramaViewer.requestAnimationFrameFunc=function(callback,element) {
thefunc.call(window, callback, element);
};
break;
}
}
if(!nhPanoramaViewer.requestAnimationFrameFunc)
{
nhPanoramaViewer.requestAnimationFrameFunc=function(callback,element) {
window.setTimeout(callback,16.67);
};
}
}
nhPanoramaViewer.requestAnimationFrameFunc(callback,element);
}


p1.xid=function(xib)
{
var xvf=this.xBe() / 1000.0;
var deltanow=0.01;
if(this.m_PrevDeviceMotionTime)
{
deltanow=xvf-this.m_PrevDeviceMotionTime;
}
this.m_PrevDeviceMotionTime=xvf;
if(xib.rotationRate && xib.accelerationIncludingGravity)
{
var xg=xib.rotationRate;
var xei=xib.accelerationIncludingGravity;
var interval=deltanow;
if( (!isNaN(xei.x)) && (!isNaN(xei.y)) && (!isNaN(xei.z))
&& (!isNaN(xg.alpha)) && (!isNaN(xg.beta)) && (!isNaN(xg.gamma))
&& (!isNaN(interval)) )
{
if(this.xWg == 0)
{
this.xWg=xvf+1.0;
}
if(xvf >= this.xWg)
{
var x6b=[xei.x, xei.y, xei.z];
if(this.m_gravityReversed)
{
x6b[0]=-x6b[0];
x6b[1]=-x6b[1];
x6b[2]=-x6b[2];
}
if(this.xOc != null)
{
var xxd=this.xde;
xxd=Math.pow(xxd,interval);
var x6f=1.0-xxd;
x6b[0]=x6f*x6b[0]+xxd*this.xOc[0];
x6b[1]=x6f*x6b[1]+xxd*this.xOc[1];
x6b[2]=x6f*x6b[2]+xxd*this.xOc[2];
}
this.xOc=x6b;
var xEe=Math.sqrt(x6b[0]*x6b[0]+x6b[1]*x6b[1]+x6b[2]*x6b[2]);
if(xEe > 0)
{
var xN=1.0/xEe;
x6b[0] *= xN;
x6b[1] *= xN;
x6b[2] *= xN;
}
this.xlg=x6b;

var xif=Math.asin(x6b[2]);
var x8g=0;
if( (x6b[0] != 0) || (x6b[1] != 0) )
{
x8g=Math.atan2(x6b[0],-x6b[1]);
}
x8g *= 180.0/Math.PI;
xif *= 180.0/Math.PI;
if(this.xkh == this.xMc)
{
if(this.xYg == this.xdf)
{
var x1g=x6b[0]-this.xQh[0];
var xVf=x6b[1]-this.xQh[1];
var xeh=x6b[2]-this.xQh[2];
var xEg=x1g*x1g+xVf*xVf+xeh*xeh;
if(xEg > 0.1)
{
this.xac(xif);
}
}
else if(this.xYg == this.xBb)
{
if(xif > -60)
{
this.xac(xif);
}
}
}
if(this.xYg == this.xbb)
{
if( (Math.abs(xg.alpha) > 20)
|| (Math.abs(xg.beta) > 20)
|| (Math.abs(xg.gamma) > 20) )
{
this.xGg();
}
}
var xxb=xg.alpha;
var xod=xg.beta;
var xA=xg.gamma;
xxb *= interval;
xod *= interval;
xA *= interval;
if(this.m_rotationRateRadians)
{
xxb *= 180.0/Math.PI;
xod *= 180.0/Math.PI;
xA *= 180.0/Math.PI;
}
var x5b=new x5j();
var xTb=new x5j();
xTb.xak(2,xA);
x5b.xmk(xTb);
xTb.xak(1,xod);
x5b.xmk(xTb);
xTb.xak(0,xxb);
x5b.xmk(xTb);
var x4=new x5j();
xTb.xak(2,-x8g);
x4.xmk(xTb);
xTb.xak(0,xif);
x4.xmk(xTb);
var x7h=new x5j(x4);
x7h.xbk();
var xbd=new x5j();
xbd.xmk(x7h);
xbd.xmk(x5b);
xbd.xmk(x4);
var xBh=xbd.xgk([1,0,0]);
var x8f=Math.atan2(xBh[2],xBh[0]);
x8f *= 180.0/Math.PI;
var x1b=this.x1h;
if(this.xqf == 0)
{
x1b += x8f;
}
var xzg;
if( (this.xkh == this.xMc)
&& (this.xYg == this.xbb)
)
{
var x4d=interval*180;
if(this.xFb > 0)
{
this.xFb -= x4d;
if(this.xFb < 0) this.xFb=0;
}
else if(this.xFb < 0)
{
this.xFb += x4d;
if(this.xFb > 0) this.xFb=0;
}
xzg=xif+this.xFb;
if(xzg < -90) xzg=-90;
if(xzg > 90) xzg=90;
}
else
{
xzg=this.xSh;
}
if( (!isNaN(x1b)) && (!isNaN(xzg)))
{
this.xB(x1b,xzg,this.xcc);
}
}
}
}
}
p1.xqe=function(xib)
{
this.log("Error: WebGL context lost");
}
p1.xq=function(xib)
{
this.log("WebGL context restored");
}
p1.xLh=function()
{
return (this.xYg == this.xbb);
}
p1.x8b=function()
{
if(this.xYg != this.xBb)
{
this.xQh=this.xlg;
this.xYg=this.xdf;
}
}
p1.xac=function(xxf)
{
if(xxf < -60)
{
this.xYg=this.xBb;
}
else
{
this.xYg=this.xbb;
this.xFb=this.xSh-xxf;
this.xGg();
}
}
p1.xBf=function()
{
var xyf="The publisher of this panorama should check the contents of the 'licensekey' field in the parameters for this panorama.";
if(this.xNc < 0)
{
this.xNc=0;
if(this.xQd !="")
{
var xWe=this.xpi(this.xQd);
if(xWe.valid)
{
var x6g=this.xc();
if(x6g =="")
{
this.log("License key ('licensekey' field) ignored since the panorama is viewed on the local computer.");
}
else
{
var xed=false;
if(x6g == xWe.host)
{
xed=true;
}
else
{
var xSc="."+xWe.host;
var xPg=x6g.lastIndexOf(xSc);
if( (xPg >= 0) && (xPg == (x6g.length-xSc.length)) )
{
xed=true;
}
}
if(xed)
{
this.xNc=1;
}
else
{
this.log("Invalid license: the license is valid for '"+xWe.host+"' but the panorama is stored on '"+x6g+"'. "+xyf);
}
}
}
else
{
this.log("Invalid license key. "+xyf);
}
}
}
return (this.xNc > 0);
}
p1.x3e=function(xne)
{
var valid=false;
var xPg=xne.lastIndexOf(":");
if(xPg >= 0)
{
var xoh=xne.substr(0,xPg);
var xFg=xne.substr(xPg+1,xne.length-xPg-1);
var xte=new xKm(this.xcd);
var x2e=new xKm(this.xWh);
var xZc=new xrp();
xZc.xyn(xte, x2e);
valid=xZc.xjp(xoh, xFg);
}
return valid;
}
p1.xpi=function(xne)
{
var xUg=new Object();
try
{
xUg.valid=this.x3e(xne);
}
catch(xib)
{
xUg.valid=false;
}
if(xUg.valid)
{
var components=xne.split(":");
if(components.length < 3)
{
xUg.valid=false;
}
else
{
xUg.host=components[0];
xUg.version=components[1];
}
}
return xUg;
}
p1.xx8944hjkxx7jk=function(xV, xDe)
{
xV=xV.toLowerCase();
var xoh=xV.toLowerCase()+":1";
var x2e=new xKm(this.xWh);
var xhh=new xKm(xDe);
var xte=new xKm(this.xcd);
var xZc=new xrp();
xZc.xwn(xhh, x2e);
xZc.xyn(xte, x2e);
var xFg=xZc.xdp(xoh,true);
var xPd=xoh+":"+xFg;
var xDh=this.xpi(xPd);
if(!xDh.valid)
{
xDh=this.xpi(xPd);
throw new Error("Check failed");
}
return xPd;
}
p1.xc=function()
{
var xC=this.xw(0);
var xy=this.xeb();
xC=this.xm(xC,xy);
var host="";
if(xC.indexOf("://") >= 0)
{
host=xC.replace(new RegExp("^.*:\\/\\/"),"");
host=host.replace(new RegExp("\\/.*$"),"");
host=host.replace(new RegExp(":.*$"),"");
}
host=host.toLowerCase();
return host;
}

var p2=xPi.prototype;
p2.lsNotLoaded=0;
p2.xPj=1;
p2.x9i=2;
p2.xvi=3;
p2.xMh=false;
p2.xyi=0;
function xPi(xsi, xBi, xdi, xif, xt, xJh, xuf)
{
this.xCj=this.lsNotLoaded;
this.xSi=xsi;
this.xej=xBi;
this.xxi=xdi;
this.xwj=xif;
this.xvj=xt;
this.xkj=xJh;
this.x4i=xuf;
if(this.xSi.xQg)
{
var xfb=document.createElement("div");
xfb.style.position="absolute";
xfb.style.msBackfaceVisibility=xfb.style.webkitBackfaceVisibility=xfb.style.MozBackfaceVisibility="hidden";
xfb.style.MozTransformStyle="preserve-3d";
xfb.style.top="0px";
xfb.style.left="0px";
var xIi=xsi.xCd();
xIi.appendChild(xfb);
this.xZe=xfb;
}
if(this.xSi.xsb)
{
this.x1i();
}
var xtg=document.createElement("img");
xtg.style.position="absolute";
xtg.style.top="0px";
xtg.style.left="0px";
xtg.style.visibility="hidden";
this.xDi=xtg;
var xHf=this;
if(document.addEventListener)
{
xtg.addEventListener("load", function(xib){return xHf.xXi(xib? xib : window.event)}, false);
xtg.addEventListener("error", function(xib){return xHf.xWi(xib? xib : window.event)}, false);
}
else if(document.attachEvent)
{
xtg.attachEvent("onload", function(xib){return xHf.xXi(xib? xib : window.event)});
xtg.attachEvent("onerror", function(xib){return xHf.xWi(xib? xib : window.event)});
}
if(this.xSi.xQg)
{
this.xZe.appendChild(this.xDi);
var xhj=document.createElement("canvas");
xhj.style.position="absolute";
xhj.style.top="0px";
xhj.style.left="0px";
xhj.style.visibility="hidden";
xfb.appendChild(xhj);
this.xKj=xhj;
}
this.xGi();
}
p2.x1i=function()
{
var x2b=10;
var width=x2b*Math.tan(0.5*this.xvj*Math.PI/180);
var xMj=new x5j();
xMj.xak(0,this.xwj);
var xUe=new x5j();
xUe.xak(1,-this.xxi);
xMj.xmk(xUe);
var xuj=[];
for(var xoj=0; xoj < 4; xoj++)
{
var x5i=[];
x5i[0]=(xoj & 1)? -width : width;
x5i[1]=(xoj & 2)? -width : width;
x5i[2]=-x2b;
x5i=xMj.xgk(x5i);
xuj=xuj.concat(x5i);
}
this.xQj=this.xSi.x1d(xuj);
}
p2.xVi=function()
{
this.xYi();
}
p2.xYi=function()
{
this.xCj=this.xPj;
if(this.xyi > 0)
{
var xHf=this;
window.setTimeout(function(){xHf.xDi.src=xHf.xej}, this.xyi*1000);
}
else
{
this.xDi.src=this.xej;
}
}
p2.xWi=function(event)
{
this.xSi.xGd("Failed to load image: "+this.xej);
this.xCj=this.xvi;
this.xSi.xre(this);
return true;
}
p2.xXi=function(event)
{
this.xCj=this.x9i;
if(this.xDi.width != this.xDi.height)
{
this.xSi.xGd("Image "+this.xej+" should be square");
}
var xTj=this.xDi.width;
if(this.x4i && (this.xDi.width > this.x4i))
{
this.xDi.width=this.x4i;
this.xDi.height=this.x4i;
var xHf=this;
}
this.xlj=new Array(this.xDi.width, this.xDi.height);
if(this.xSi.xQg)
{
this.xyc();
this.xKj.style.visibility="hidden";
this.xDi.style.visibility="visible";
this.xZe.style.width=this.xlj[0]+"px";
this.xZe.style.height=this.xlj[1]+"px";
}
else
{
this.xqj=this.xSi.x7g(this.xDi);
this.xcj(0.0, 0.0, 1.0, 1.0);
}
if(nhPanoramaViewer.isIOS())
{
var xHf=this;
setTimeout(function(){
xHf.xSi.xre(this);
},100);
}
else
{
this.xSi.xre(this);
}
return true;
}
p2.xGi=function()
{
}
p2.x8i=function(event)
{
try
{
xaj(this.xFj,false);
this.xFj=null;
this.xSi.xre(this);
}
catch (xKb)
{
this.xSi.xGd(xKb.toString());
}
}
p2.xyc=function()
{
if((this.xCj == this.x9i) || this.xMh)
{
this.xqi();
}
}
p2.xqi=function()
{
if(this.xSi.xQg)
{
var x3i=this.xSi.xgh();
var xHj=this.xSi.xbg();
var xSj=this.xSi.xah();
var xOi=this.xSi.xMb();
var xLi=this.xlj[0];
var xmj=this.xlj[1];
var xMi=1000.0*(this.xkj+1);
var ownerstyle=this.xSi.xCd().style;
var xBj=1;
if(typeof ownerstyle.webkitPerspective =="string")
{
xBj=ownerstyle.webkitPerspective;
}
else if(typeof ownerstyle.MozPerspective =="string")
{
xBj=ownerstyle.MozPerspective;
}
else
{
xBj=ownerstyle.msPerspective;
}
xBj=xBj.replace(/\s*px\s*$/,"");
xBj=xBj-0;
var xGj=0.5*xMi/Math.tan(0.5*this.xvj*Math.PI/180);

var xri="translate3d("+(-(xLi-xSj)/2).toFixed(4)+"px,"+(-(xmj-xOi)/2).toFixed(4)+"px,"+xBj.toFixed(4)+"px)"
+" rotateX("+xHj.toFixed(4)+"deg)"
+" rotateY("+(x3i-this.xxi).toFixed(4)+"deg)"
+" rotateX("+(-this.xwj).toFixed(4)+"deg)"
+" translate3d(0px,0px,"+(-xGj).toFixed(4)+"px)"
+" scale3d("+(xMi/xLi).toFixed(4)+","+(xMi/xmj).toFixed(4)+",1)";
this.xZe.style.msTransform=this.xZe.style.webkitTransform=this.xZe.style.MozTransform=xri;
}
}
p2.xNj=function()
{
return this.xCj;
}
p2.xij=function()
{
return this.xMh;
}
p2.xKi=function()
{
return this.xxi;
}
p2.xAi=function()
{
return this.xwj;
}
p2.xDj=function(xhj, xHc)
{
this.xMh=true;
if(this.xCj != this.xPj) this.xCj=this.lsNotLoaded;
var xE=xHc[2];
var xUi=xHc[3];
var previewimage=this.xKj;
previewimage.width=xE;
previewimage.height=xUi;
var xpj = previewimage.getContext('2d');
xpj.drawImage(xhj, xHc[0], xHc[1], xE, xUi, 0, 0, xE, xUi);
previewimage.style.visibility="visible";
this.xZe.style.width=previewimage.width+"px";
this.xZe.style.height=previewimage.height+"px";
this.xlj=new Array(previewimage.width,previewimage.height);
this.xyc();
}
p2.xIj=function(xgj, xLi, xHc)
{
this.xqj=xgj;
var xnj=xHc[0]/xLi;
var xZi=(xHc[0]+xHc[2])/xLi;
var xfj=1.0-(xHc[1]+xHc[3])/xLi;
var xAj=1.0-xHc[1]/xLi;
this.xcj(xnj, xfj, xZi, xAj);
this.xMh=true;
if(this.xCj != this.xPj) this.xCj=this.lsNotLoaded;
}
p2.xcj=function(xnj, xfj, xZi, xAj)
{
this.xRi=this.xSi.x1d([xZi, xAj, xnj, xAj, xZi, xfj, xnj, xfj]);
}
p2.xNi=function()
{
if(this.xqj)
{
return [this.xqj, this.xQj, this.xRi];
}
else
{
return null;
}
}

var p3=x5j.prototype;
p3.xdk=[1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
function x5j(src)
{
if(src)
{
this.xdk=src.xdk.slice(0);
}
}
p3.xmk=function(xhk)
{
var xjk=[];
var xlk=0;
var xek=0;
var x3j;
var xXj;
var x9j;
while(true)
{
x3j=0;
xXj=xlk;
x9j=xek;
while(true)
{
x3j += this.xdk[xXj++]*xhk.xdk[x9j];
x9j += 4;
if(x9j >= 16) break;
}
xjk.push(x3j);
xek++;
if(xek == 4)
{
xlk += 4;
if(xlk == 16) break;
xek=0;
}
}
this.xdk=xjk;
return this;
}
p3.x8j=function(xh, xu, xfk, x0j)
{
var xBc=0.5 * xh * Math.PI / 180.0;
var xfj=xfk * Math.tan(xBc) / Math.sqrt(1+xu*xu);
var xZi=xfj*xu;
var xYj=1.0/(x0j-xfk);
this.xdk = [
xfk/xZi, 0, 0, 0,
0, xfk/xfj, 0, 0,
0, 0, -(xfk+x0j)*xYj, -1,
0, 0, -2*x0j*xfk*xYj, 0
];
return this;
}
p3.xak=function(xZj,x7j)
{
var xok=Math.PI * x7j / 180.0;
var x2j=Math.cos(xok);
var s=Math.sin(xok);
if(xZj == 0)
{
this.xdk = [
1, 0, 0, 0,
0, x2j, s, 0,
0, -s, x2j, 0,
0, 0, 0, 1
];
}
else if(xZj == 1)
{
this.xdk = [
x2j, 0, -s, 0,
0, 1, 0, 0,
s, 0, x2j, 0,
0, 0, 0, 1
];
}
else
{
this.xdk = [
x2j, s, 0, 0,
-s, x2j, 0, 0,
0, 0, 1, 0,
0, 0, 0, 1
];
}
return this;
}
p3.x1j=function()
{
return new Float32Array(this.xdk);
}
p3.xgk=function(x4j)
{
var xjk=this.xdk;
var x=xjk[0]*x4j[0]+xjk[4]*x4j[1]+xjk[8]*x4j[2]+xjk[12];
var y=xjk[1]*x4j[0]+xjk[5]*x4j[1]+xjk[9]*x4j[2]+xjk[13];
var z=xjk[2]*x4j[0]+xjk[6]*x4j[1]+xjk[10]*x4j[2]+xjk[14];
var xPh=xjk[3]*x4j[0]+xjk[7]*x4j[1]+xjk[11]*x4j[2]+xjk[15];
if(xPh != 1.0)
{
var xck=1.0/xPh;
x *= xck;
y *= xck;
z *= xck;
}
return [x,y,z];
}
p3.xbk=function()
{
var xjk=this.xdk;
this.xdk=[
xjk[0], xjk[4], xjk[8], xjk[12],
xjk[1], xjk[5], xjk[9], xjk[13],
xjk[2], xjk[6], xjk[10], xjk[14],
xjk[3], xjk[7], xjk[11], xjk[15]
];
return this;
}

var p4=xKm.prototype;

p4.xol="";
p4.xKl=false;
p4.xSl=14;

function xKm(value)
{
this.xFl=Math.floor(Math.pow(10,this.xSl-1)+0.1);
var xel=typeof value;
if( (xel =="undefined") || (value === null) )
{
}
else if(xel =="number")
{
this.xum(value);
}
else if(xel =="string")
{
this.xNk(value);
}
else if(xel =="object")
{
if(value instanceof xKm)
{
this.x4l(value);
}
else
{
var xIm="(unknown)";
if(value && value.constructor && value.constructor.toString)
{
xIm=value.constructor.toString();
}
throw new Error("Invalid type: "+xIm);
}
}
else
{
throw new Error("Invalid type: "+xel);
}
}
p4.x4l=function(xam)
{
this.xol=xam.xol;
this.xKl=xam.xKl;
}
p4.toString=function()
{
if(this.xKl)
{
return"-"+this.xol;
}
else
{
return this.xol;
}
}
p4.xll=function()
{
return (this.xol =="");
}
p4.xhm=function(value, xsm)
{
this.xol=this.xRk(value);
if(this.xll()) xsm=false;
this.xKl=xsm;
}
p4.xNk=function(value)
{
var xsm=false;
if(value.charAt(0) =="-")
{
xsm=true;
value=value.substr(1);
}
if(! value.match(/^[0-9]*$/))
{
throw new Error("Invalid value");
}
value=this.xRk(value);
if(value =="")
{
xsm=false;
}
this.xol=value;
this.xKl=xsm;
}
p4.x1k=function(xxk, xJk, length)
{
var x8l=xxk.length-xJk;
if(x8l <= 0)
{
return 0;
}
else
{
var xim=x8l-length;
if(xim < 0) xim=0;
var substr=xxk.substring(xim,x8l);
substr=substr.replace(/^0+/,"");
if(substr.length == 0) return 0;
return parseInt(substr);
}
}

p4.x3l=function(i, length)
{
var xUg=""+i;
xUg=this.x0l(length-xUg.length)+xUg;
return xUg;
}
p4.xGk=function(xLk, xpm)
{
xLk=this.xRk(xLk);
xpm=this.xRk(xpm);
if(xLk.length > xpm.length) return 1;
if(xLk.length < xpm.length) return -1;
var xUl=xLk.length;
var xBk, xcm;
for(var i=0; i < xUl; i++)
{
xBk=xLk.charCodeAt(i);
xcm=xpm.charCodeAt(i);
if(xBk > xcm) return 1;
if(xBk < xcm) return -1;
}
return 0;
}
p4.xlm=function(s)
{
var xUm=s.length;
var xml=0;
var xIk;
while(xUm > 0)
{
xIk=xUm-1;
if(s.charAt(xIk) !="0") break;
xml++;
xUm--;
}
if(xml > 0)
{
s=s.substr(0,xUm);
}
return [s,xml];
}
p4.xRk=function(s)
{
var xzk=0;
while(xzk < s.length)
{
if(s.charAt(xzk) !="0") break;
xzk++;
}
if(xzk > 0)
{
return s.substr(xzk);
}
else
{
return s;
}
}
p4.xIl=function(xYl,xUl)
{
if(xYl.length < xUl)
{
xYl=this.x0l(xUl-xYl.length)+xYl;
}
return xYl;
}
p4.x0l=function(xRm)
{
var s="000000000000000000000000000000000000000000000000000000000";
var xUg="";
while(xUg.length < xRm)
{
xUg += s.substr(0,xRm-xUg.length);
}
return xUg;
}
p4.xal=function(xLk)
{
if(xLk < 0.0)
{
throw new Error("Negative");
}
if(xLk < 1.0)
{
return"";
}
var xUk=""+xLk;
if(/^[0-9]+$/.test(xUk))
{
return xUk;
}
else
{
var exp=Math.floor(Math.log(xLk)/Math.log(10))+1;
xLk *= Math.pow(10,-exp);
if(xLk >= 1.0)
{
exp += 1;
xLk *= 0.1;
}
else if(xLk < 0.1)
{
exp -= 1;
xLk *= 10;
}
var xMk=""+xLk;
if(xMk.substr(0,2) !="0.")
{
throw new Error("Internal error");
}
xMk=xMk.substr(2);
if(xMk.length < exp)
{
xMk += this.x0l(exp-xMk.length);
}
else
{
xMk=xMk.substr(0,exp);
}
return xMk;
}
}
p4.xil=function(s)
{
s=this.xRk(s);
if(s =="")
{
return 0.0;
}
else
{
var xPl=17;
if(s.length > xPl)
{
return parseFloat(s.substr(0,xPl))*Math.pow(10,s.length-xPl);
}
else
{
return parseFloat(s);
}
}
}
p4.xcn=function()
{
var xLk=this.xol;
var xUg="";
var xWl=this.xSl-1;
var xem=this.xFl;
var xvl=Math.floor(1+(xLk.length-1)/xWl);
var xJk=(xvl-1)*xWl;
var xCl;
var xWm=0;
for(var xEk=0; xEk < xvl; xEk++)
{
xCl=this.x1k(xLk,xJk,xWl);
xCl += xWm;
xWm=(xCl & 1)? xem : 0;
xCl=Math.floor(0.5*xCl);
xUg += this.x3l(xCl, xWl);
xJk -= xWl;
}
var xFm=new xKm();
if(xWm != 0)
{
xFm.xol="1";
xFm.xKl=this.xKl;
}
this.xol=this.xRk(xUg);
return xFm;
}
p4.xSm=function(xxl, x5m)
{
var xkm=17;
var xmm=1e17;
var xHm=0;
var xLk=new xKm(xxl);
var xpm=new xKm(x5m);
if(xLk.xol.length > xkm)
{
xHm += xLk.xol.length-xkm;
xLk.xol=xLk.xol.substr(0,xkm);
}
if(xpm.xol.length > xkm)
{
xHm -= xpm.xol.length-xkm;
xpm.xol=xpm.xol.substr(0,xkm);
}
var x6k=xLk.xgl();
var xTl=xpm.xgl();
var xGl=x6k/xTl;
xGl *= xmm;
xHm -= xkm;
var xRl=new xKm(xGl);
if(xHm > 0)
{
xRl.xol += this.x0l(xHm);
}
else
{
var xUl=xRl.xol.length;
if(xUl <= -xHm)
{
xRl.xum(0);
}
else
{
xRl.xol=xRl.xol.substr(0,xUl+xHm);
}
}
return xRl;
}
p4.xYk=function(xQm)
{
if(xQm.xll())
{
throw new Error("Divide by zero");
}
if( (xQm.xol =="2") && (xQm.xKl == false) )
{
return this.xcn();
}
var xRl=new xKm();
var xFm=new xKm(this);
var xdl;
while(true)
{
if(xFm.xll())
{
break;
}
xdl=this.xSm(xFm,xQm);
if(xdl.xll())
{
if(this.xKl != xFm.xKl)
{
if(xFm.xKl == xQm.xKl)
{
xdl.xum(1);
}
else
{
xdl.xum(-1);
}
}
else
{
break;
}
}
xRl=xRl.xOk(xdl);
xFm=xFm.xwk(xdl.xbn(xQm));
}
this.x4l(xRl);
return xFm;
}
p4.xsl=function(xLk, xpm)
{
xLk=this.xRk(xLk);
xpm=this.xRk(xpm);
var xLl=this.xGk(xLk,xpm);
if(xLl == 0) return ["",false];
var xsm=false;
if(xLl < 0)
{
var xel=xpm;
xpm=xLk;
xLk=xel;
xsm=true;
}
var xUg="";
var xFd=this.xlm(xpm);
var xzl=xFd[1];
if(xzl > 0)
{
xpm=xFd[0];
var xYm=xLk.length-xzl;
xFd=this.xLm(xLk,xYm);
xUg=xFd[1]+xUg;
xLk=xFd[0];
}
var xWl=this.xSl-1;
var xNl=this.xFl;
var xAl=xLk.length;
var xWk=xpm.length;
var xJk=0;
var xWm=0;
var xVk, xPm, xEm;
while(xJk < xAl)
{
if( (xJk >= xWk) && (xWm == 0) )
{
xUg=xLk.substr(0,xAl-xJk)+xUg;
break;
}
xVk=this.x1k(xLk,xJk,xWl);
xPm=this.x1k(xpm,xJk,xWl);
xEm=xVk-xPm+xWm;
if(xEm >= 0)
{
xWm=0;
}
else
{
xWm=-1;
xEm += xNl;
}
xUg=this.x3l(xEm, xWl)+xUg;
xJk += xWl;
}
return [xUg,xsm];
}
p4.xXk=function(s, xWl)
{
var xUg=[];
var xQk=s.length;
var xJm;
var xGm;
while(true)
{
if(xQk <= 0) break;
xJm=xQk-xWl;
if(xJm < 0) xJm=0;
xGm=s.substring(xJm,xQk);
xGm=xGm.replace(/^0+/,"");
xUg.push(parseInt(xGm));
xQk -= xWl;
}
return xUg;
}
p4.xrm=function(xLk, xpm)
{
xLk=this.xRk(xLk);
xpm=this.xRk(xpm);
var xHk=0;
var xFd=this.xlm(xLk);
xLk=xFd[0];
xHk += xFd[1];
xFd=this.xlm(xpm);
xpm=xFd[0];
xHk += xFd[1];
var xUg="";
var xWl=Math.floor((this.xSl-3)/2);
if(xWl < 1) xWl=1;
var x6m=Math.floor(1+(xLk.length-1)/xWl);
var xNm=Math.floor(1+(xpm.length-1)/xWl);
var xyl=x6m+xNm-1;
var x1m, xDm, xhl, xCm, x9m, x5l, xom;
var xWm=0;
var x2k;


var x2m=this.xXk(xLk,xWl);
var xtm=this.xXk(xpm,xWl);
for(x2k=0; x2k < xyl; x2k++)
{
xDm=x2k-xNm+1;
if(xDm < 0) xDm=0;
xhl=x2k+1;
if(xhl > x6m) xhl=x6m;
x9m=0;
xCm=x2k-xDm;
for(x1m=xDm; x1m < xhl; x1m++)
{
var x7k=x2m[x1m];
var xuk=xtm[xCm];
x9m += x7k*xuk;
xCm--;
}
x9m += xWm;
x5l=this.x3l(x9m, xWl);
if(x5l.length > xWl)
{
xom=x5l.length-xWl;
xWm=parseInt(x5l.substr(0, xom));
x5l=x5l.substr(xom);
}
else
{
xWm=0;
}
xUg=x5l+xUg;
}
if(xWm != 0)
{
xUg=(""+xWm)+xUg;
}
if(xHk != 0)
{
xUg += this.x0l(xHk);
}
return xUg;
}
p4.xLm=function(s, xYm)
{
var xwm, xMl;
if(xYm < 0)
{
xwm="";
xMl=this.x0l(-xYm)+s;
}
else if(xYm > s.length)
{
xwm=s+this.x0l(xYm-s.length);
xMl="";
}
else
{
xwm=s.substr(0,xYm);
xMl=s.substr(xYm);
}
return [xwm,xMl];
}
p4.xnl=function(xLk, xpm)
{
xLk=this.xRk(xLk);
xpm=this.xRk(xpm);
if(xLk.length < xpm.length)
{
var xtk=xLk;
xLk=xpm;
xpm=xtk;
}
var xUg="";
var xFd=this.xlm(xLk);
var xzl=xFd[1];
var xYm;
if(xzl > 0)
{
xLk=xFd[0];
xYm=xpm.length-xzl;
xFd=this.xLm(xpm,xYm);
xUg=xFd[1]+xUg;
xpm=xFd[0];
}
xFd=this.xlm(xpm);
xzl=xFd[1];
if(xzl > 0)
{
xpm=xFd[0];
xYm=xLk.length-xzl;
xFd=this.xLm(xLk,xYm);
xUg=xFd[1]+xUg;
xLk=xFd[0];
}
var xWl=this.xSl;
var xAl=xLk.length;
var xWk=xpm.length;
var xJk=0;
var xWm=0;
var xVk, xPm, x5l, xom;
while(xJk < xAl)
{
if( (xJk >= xWk) && (xWm == 0) )
{
xUg=xLk.substr(0,xAl-xJk)+xUg;
break;
}
xVk=this.x1k(xLk,xJk,xWl);
xPm=this.x1k(xpm,xJk,xWl);
x5l=this.x3l(xVk+xPm+xWm, xWl);
if(x5l.length > xWl)
{
xom=x5l.length-xWl;
xWm=parseInt(x5l.substr(0, xom));
x5l=x5l.substr(xom);
}
else
{
xWm=0;
}
xUg=x5l+xUg;
xJk += xWl;
}
if(xWm != 0)
{
xUg=(""+xWm)+xUg;
}
return xUg;
}
p4.xVm=function(xLk, xbm, xpm, xEl)
{
var xdm, xsm;
if(xbm == xEl)
{
xdm=this.xnl(xLk,xpm);
xsm=xbm;
}
else
{
var xUg=this.xsl(xLk,xpm);
xdm=xUg[0];
xsm=xbm;
if(xUg[1])
{
xsm=!xsm;
}
}
return [xdm,xsm];
}
p4.xOk=function(xpm)
{
var xdm=this.xVm(this.xol, this.xKl, xpm.xol, xpm.xKl);
var xUg=new xKm();
xUg.xhm(xdm[0],xdm[1]);
return xUg;
}
p4.xwk=function(xpm)
{
var xdm=this.xVm(this.xol, this.xKl, xpm.xol, !xpm.xKl);
var xUg=new xKm();
xUg.xhm(xdm[0],xdm[1]);
return xUg;
}
p4.x8k=function(xpm)
{
if(this.xKl && (!xpm.xKl)) return -1;
if(xpm.xKl && (!this.xKl)) return 1;
var xUg=this.xGk(this.xol, xpm.xol);
if(this.xKl) xUg=-xUg;
return xUg;
}
p4.xbn=function(xpm)
{
var xsm=this.xKl;
if(xpm.xKl) xsm=!xsm;
var xZm=this.xrm(this.xol, xpm.xol);
var xUg=new xKm();
xUg.xhm(xZm,xsm);
return xUg;
}
p4.xgm=function(xpm)
{
var xRl=new xKm(this);
var xFm=xRl.xYk(xpm);

return [xRl,xFm];
}
p4.xqk=function(xpm)
{
var xUg=this.xgm(xpm);
return xUg[0];
}
p4.xtl=function(xpm)
{
var xUg=this.xgm(xpm);
return xUg[1];
}
p4.x2l=function(xpm)
{
return ((this.xol == xpm.xol) && (this.xKl == xpm.xKl));
}
p4.xum=function(xjm)
{
this.xKl=(xjm < 0.0);
if(this.xKl)
{
xjm=-xjm;
}
this.xol=this.xal(xjm);
}
p4.xgl=function()
{
var xUg=this.xil(this.xol);
if( (!this.xll()) && (this.xKl) )
{
xUg=-xUg;
}
return xUg;
}
p4.xbl=function()
{
if(this.xKl)
{
throw new Error("Not supported");
}
var xRm=new xKm(this);
var xFd;
var xUg=[];
var xQm=new xKm("4294967296");
while(true)
{
xFd=xRm.xgm(xQm);
xRm=xFd[0];
var x3m=xRm.xll();
var xan=xFd[1].xgl();
for(var i=0; i < 4; i++)
{
if(x3m && (xan == 0)) break;
xUg.push(xan & 0xff);
xan >>= 8;
}
if(x3m) break;
}
xUg.reverse();

return xUg;
}

p4.x7m=function(xAk)
{
var xvk=3-((xAk.length+3)&3);
var xFd=[];
while(xvk-- > 0)
{
xFd.push(0);
}
xFd=xFd.concat(xAk);
var xUg=new xKm();
var xmm=new xKm("4294967296");
for(var x4k=0; x4k < xFd.length; x4k += 4)
{
xUg=xUg.xbn(xmm);
var xan=(xFd[x4k]<<24) | (xFd[x4k+1]<<16) | (xFd[x4k+2]<<8) | (xFd[x4k+3]);
if(xan < 0)
{
xan += 0x100000000;
}
var xOk=new xKm(xan);
xUg=xUg.xOk(xOk);
}
this.x4l(xUg);
}
p4.xXm=function(xAm, xOl)
{
if(this.xKl || xAm.xKl || xOl.xKl)
{
throw new Error("Negative");
}
var xSk=new xKm(this);
var x4m=new xKm("2");
var xBl=new xKm(xAm);
var xTk;
var xUg=new xKm("1");
while(true)
{
xTk=xBl.xYk(x4m);
if(!xTk.xll())
{
xUg=xUg.xbn(xSk);
xUg=xUg.xtl(xOl);
}
if(xBl.xll())
{
break;
}
xSk=xSk.xbn(xSk);
xSk=xSk.xtl(xOl);
}
return xUg;
}
p4.xMm=function()
{
return this.xKl;
}

var p5=xzn.prototype;
p5.xTn=null;
p5.xmn=null;
p5.xkn=null;
function xzn()
{
}



p5.xCn=function(xBn, xNn)
{
var xLn=new xKm("1");
var x2e=xBn.xbn(xNn);
var xdn=xBn.xwk(xLn).xbn(xNn.xwk(xLn));
var xte=new xKm(17);
var xHn=this.xnn(xte,xdn);
var xFn=xHn[2];
if(!xFn.x2l(xLn))
{
if(!xdn.xtl(xFn).xll())
{
throw new Error("internal error");
}
throw new Error("not coprime");
}
var xhh=xHn[0];
if(xhh.xMm())
{
xhh=xhh.xOk(xdn);
}
if(xhh.xMm())
{
throw new Error("negative");
}
if(xhh.x8k(xdn) >= 0)
{
throw new Error("too large");
}
var xDh=xhh.xbn(xte).xtl(xdn);
if(!xDh.x2l(xLn))
{
throw new Error("failed2");
}
return [xte,xhh,x2e];
}
p5.xyn=function(xJk, x2e)
{
this.xmn=new xKm(xJk);
this.xTn=new xKm(x2e);
}
p5.xwn=function(xJk, x2e)
{
this.xkn=new xKm(xJk);
this.xTn=new xKm(x2e);
}
p5.xJn=function()
{
return this.xmn;
}
p5.xEn=function()
{
return this.xkn;
}
p5.xpn=function()
{
return this.xTn;
}
p5.xGn=function()
{
if( (!this.xTn) || (!this.xkn) )
{
throw new Error("Need private key");
}
}
p5.xjn=function()
{
if( (!this.xTn) || (!this.xmn) )
{
throw new Error("Need public key");
}
}
p5.xqn=function(message)
{
this.xGn();
if(message.x8k(this.xTn) >= 0)
{
throw new Error("Message too large");
}
return message.xXm(this.xkn,this.xTn);
}
p5.xtn=function(message)
{
this.xjn();
if(message.x8k(this.xTn) >= 0)
{
throw new Error("Message too large");
}
return message.xXm(this.xmn,this.xTn);
}

p5.xnn=function(xin, xRn)
{
var x3j=new xKm(xin);
var xHl=new xKm(xRn);
var x=new xKm();
var y=new xKm("1");
var xon=new xKm("1");
var xvn=new xKm();
while(!xHl.xll())
{
var xen=x3j.xgm(xHl);
var xRl=xen[0];
x3j.x4l(xHl);
xHl=xen[1];
var xxn=xon.xwk(xRl.xbn(x));
var xsn=xvn.xwk(xRl.xbn(y));
xon=x;
xvn=y;
x=xxn;
y=xsn;
}
var xDh=xon.xbn(xin).xOk(xvn.xbn(xRn));
if(!xDh.x2l(x3j))
{
throw new Error("Failed3");
}
if(!xin.xtl(x3j).xll())
{
throw new Error("Failed4");
}
if(!xRn.xtl(x3j).xll())
{
throw new Error("Failed5");
}
return [xon, xvn, x3j];
}

var p6=xio.prototype;
function xio()
{
}

p6.xpo=function(xfo)
{
this.xCo();
var xjo=xfo.length;
var x4k=0;
var xVn=xjo;
while(true)
{
if(xVn >= 64)
{
this.xgo(xfo.slice(x4k,x4k+64));
xVn -= 64;
x4k += 64;
}
else
{
this.xoo(xfo.slice(x4k,x4k+xVn),xjo);
break;
}
}
return this.xxo(this.xeo);
}
p6.xyo=function(s)
{
var xYn=this.xmo(s);
this.xpo(xYn);
}
p6.xho=function()
{
return this.xxo(this.xeo);
}
p6.xAo=function()
{
var xYn=this.xxo(this.xeo);
return this.xso(xYn);
}
p6.xso=function(x3j)
{
var xUg="";
for(var i=0; i < x3j.length; i++)
{
var xHl=x3j[i];
for(var x2k=0; x2k < 2; x2k++)
{
var xvo=(xHl >> 4)&0x0f;
if(xvo < 10)
{
xUg += String.fromCharCode(48+xvo);
}
else
{
xUg += String.fromCharCode(87+xvo);
}
xHl <<= 4;
}
}
return xUg;
}
//////////// private: ///////////////
p6.xCo=function()
{
this.xeo=[0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0];
}
p6.xDo=function(xGo)
{
if(xGo.length != 16)
{
throw new Error("Should be 16");
}
var xPh=[];
var i;
for(i=0; i < 16; i++)
{
xPh[i]=xGo[i];
}
for(i=16; i < 80; i++)
{
xPh[i] = this.xlo(xPh[i-3] ^ xPh[i-8] ^ xPh[i-14] ^ xPh[i-16], 1);
}
var x9n=this.xeo.slice(0);
var xjm, xuo, xzo;
for(i=0; i < 80; i++)
{
if(i < 20)
{
xjm = (x9n[1] & x9n[2]) | ((x9n[1]^0xffffffff) & x9n[3]);
xuo = 0x5A827999;
}
else if(i < 40)
{
xjm = x9n[1] ^ x9n[2] ^ x9n[3];
xuo = 0x6ED9EBA1;
}
else if(i < 60)
{
xjm = (x9n[1] & x9n[2]) | (x9n[1] & x9n[3]) | (x9n[2] & x9n[3]);
xuo = 0x8F1BBCDC;
}
else
{
xjm = x9n[1] ^ x9n[2] ^ x9n[3];
xuo = 0xCA62C1D6;
}
xzo = (this.xlo(x9n[0], 5)+xjm+x9n[4]+xuo+xPh[i]) & 0xffffffff;
x9n[4] = x9n[3];
x9n[3] = x9n[2];
x9n[2] = this.xlo(x9n[1], 30);
x9n[1] = x9n[0];
x9n[0] = xzo;
}
for(i=0; i < 5; i++)
{
xzo=this.xeo[i]+x9n[i];
xzo &= 0xffffffff;
this.xeo[i]=xzo;
}
}
p6.xgo=function(xfo)
{
if(xfo.length != 64)
{
throw new Error("Should be 64");
}
var xwo=this.xbo(xfo);
this.xDo(xwo);
}
p6.xoo=function(xfo, xFo)
{
var x2n=xFo & 63;
var xEo=xfo.slice(0,x2n);
xEo.push(128);
if(xEo.length < 56)
{
while(xEo.length < 56)
{
xEo.push(0);
}
}
else
{
while(xEo.length < 120)
{
xEo.push(0);
}
}
xFo *= 8;
var xno=this.xxo([Math.floor(xFo/0x100000000), xFo&0xffffffff]);
xEo=xEo.concat(xno);
if(xEo.length == 64)
{
this.xgo(xEo);
}
else
{
this.xgo(xEo.slice(0,64));
this.xgo(xEo.slice(64,128));
}
}
p6.xlo=function(xHl, x8n)
{
xHl &= 0xffffffff;
var xUg=this.xZn(xHl, x8n);
var xDh=this.xZn(xUg, -x8n);
if(xHl != xDh)
{
throw new Error("Failed");
}
return xUg;
}
p6.xZn=function(xHl, x8n)
{
x8n &= 31;
if(x8n == 0) return xHl;
var xUg=(xHl << x8n)&0xffffffff;
var xUn=32-x8n;
var xao=0x7fffffff >> (xUn-1);
var x7n=(xHl >> xUn)&xao;
xUg |= x7n;
return xUg;
}
p6.xbo=function(xfo)
{
if(xfo.length & 3)
{
throw new Error("Should be multiple of 4");
}
var xwo=[];
var xam=0;
var i=0;
while(i < xfo.length)
{
xam <<= 8;
xam |= (xfo[i] & 0xff);
i++;
if( (i & 3) == 0)
{
xwo.push(xam);
xam=0;
}
}
return xwo;
}
p6.xxo=function(xGo)
{
var xYn=[];
var xPh, i, xto;
for(i=0; i < xGo.length; i++)
{
xPh=xGo[i];
xYn.push((xPh >> 24)&0xff);
xYn.push((xPh >> 16)&0xff);
xYn.push((xPh >> 8)&0xff);
xYn.push((xPh)&0xff);
}
return xYn;
}
p6.xmo=function(s)
{
var xUg=[];
for(var i=0; i < s.length; i++)
{
xUg=xUg.concat(this.xWn(s.charCodeAt(i)));
}
return xUg;
}
p6.xWn=function(x2j)
{
var xUg;
if(x2j <= 0x7f)
{
xUg=[x2j];
}
else if(x2j <= 0x07ff)
{
xUg=[0xc0|((x2j>>6)&0x1f), 0x80|(x2j&0x3f)];
}
else if(x2j <= 0xffff)
{
xUg=[0xc0|((x2j>>12)&0x0f), 0x80|((x2j>>6)&0x3f), 0x80|(x2j&0x3f)];
}
else if(x2j <= 0x1fffff)
{
xUg=[0xc0|((x2j>>18)&0x07), 0x80|((x2j>>12)&0x3f), 0x80|((x2j>>6)&0x3f), 0x80|(x2j&0x3f)];
}
else if(x2j <= 0x3ffffff)
{
xUg=[0xc0|((x2j>>24)&0x03), 0x80|((x2j>>18)&0x3f), 0x80|((x2j>>12)&0x3f), 0x80|((x2j>>6)&0x3f), 0x80|(x2j&0x3f)];
}
else
{
xUg=[0xc0|((x2j>>30)&0x01), 0x80|((x2j>>24)&0x3f), 0x80|((x2j>>18)&0x3f), 0x80|((x2j>>12)&0x3f), 0x80|((x2j>>6)&0x3f), 0x80|(x2j&0x3f)];
}
return xUg;
}

var p7=xHo.prototype;
function xHo()
{
this.xKo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
}

p7.x0o=function(xYn)
{
var xUg="";
var xjo=xYn.length;
var xJh=0;
var xQk;
while(xJh < xjo)
{
xQk=xJh+3;
if(xQk > xjo) xQk=xjo;
xUg += this.xMo(xYn.slice(xJh,xQk));
xJh=xQk;
}

return xUg;
}
p7.xSo=function(xYl)
{
var xUg=[];
if( (xYl.length % 4) != 0)
{
this.xXo();
}
var xJh=0;
var xIo;
while(xJh < xYl.length)
{
xIo=this.x4o(xYl.substr(xJh,4));
xUg=xUg.concat(xIo);
xJh += 4;
}
return xUg;
}
p7.xMo=function(xYn)
{
var xUg="";
var xvo=xYn[0] >> 2;
xUg += this.xKo.substr(xvo,1);
var xHl;
if(xYn.length < 2)
{
xHl=0;
}
else
{
xHl=xYn[1];
}
xvo=((xYn[0] & 0x03) << 4) | (xHl >> 4);
xUg += this.xKo.substr(xvo,1);
if(xYn.length < 2)
{
xUg +="==";
}
else
{
if(xYn.length < 3)
{
xHl=0;
}
else
{
xHl=xYn[2];
}
xvo=((xYn[1] & 0x0f) << 2) | (xHl >> 6);
xUg += this.xKo.substr(xvo,1);
if(xYn.length < 3)
{
xUg +="=";
}
else
{
xvo=xHl & 0x3f;
xUg += this.xKo.substr(xvo,1);
}
}
return xUg;
}
p7.x4o=function(xYl)
{
if(xYl.length != 4)
{
this.xXo();
}
var xUg=[];
var xUo=this.xQo(xYl.charCodeAt(0));
var xYo=this.xQo(xYl.charCodeAt(1));
xUg[0]=(xUo << 2) | (xYo >> 4);
var i=xYl.charCodeAt(2);
if(i != 61)
{
xUo=xYo;
xYo=this.xQo(i);
xUg[1]=((xUo & 0x0f) << 4) | (xYo >> 2);
i=xYl.charCodeAt(3);
if(i != 61)
{
xUo=xYo;
xYo=this.xQo(i);
xUg[2]=((xUo & 0x03) << 6) | xYo;
}
}
return xUg;
}
p7.xQo=function(xTo)
{
if( (xTo >= 65) && (xTo <= 90))
{
return xTo-65;
}
else if( (xTo >= 97) && (xTo <= 122))
{
return xTo-71;
}
else if( (xTo >= 48) && (xTo <= 57))
{
return xTo+4;
}
else if(xTo == 43)
{
return 62;
}
else if(xTo == 47)
{
return 63;
}
this.xXo();
return 0;
}
p7.xXo=function()
{
throw new Error("Faulty Base64 data");
}

var p8=xrp.prototype;
function xrp()
{
this.x9o=new xzn();
this.xqp=new xio();
this.xlp=new xHo();
}

p8.xdp=function(message, xjp)
{
this.x9o.xGn();
if(xjp)
{
this.x9o.xjn();
}
this.xqp.xyo(message);
var xko=this.xqp.xho();
var x2e=this.x9o.xpn();
var x7o=x2e.xbl();
var xbp=x7o.length-1;
if(xko.length > xbp)
{
throw new Error("Key too short");
}
var xpp="";
while(xko.length < xbp)
{
var xPg=Math.floor(Math.random()*255);
xko[xko.length]=xPg;
xpp += xPg+",";
}
var xcp=new xKm();
xcp.x7m(xko);
var xhn=this.x9o.xqn(xcp);
if(xjp)
{
var xsp=this.x9o.xtn(xhn);
if(! xsp.x2l(xcp))
{
throw new Error("Internal error");
}
}
var xap=xhn.xbl();
var xmp=this.xlp.x0o(xap);
return xmp;
}
p8.xjp=function(message, xFg)
{
this.x9o.xjn();
var xtp=this.xlp.xSo(xFg);
var xkp=new xKm();
xkp.x7m(xtp);
var xsp=this.x9o.xtn(xkp);
var xip=xsp.xbl();
this.xqp.xyo(message);
var xko=this.xqp.xho();
if(xip.length < xko.length) return false;
for(var i=0; i < xko.length; i++)
{
if(xip[i] != xko[i]) return false;
}
return true;
}
p8.xyn=function(xJk, x2e)
{
this.x9o.xyn(xJk, x2e);
}
p8.xwn=function(xJk, x2e)
{
this.x9o.xwn(xJk, x2e);
}

